<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>TaskAI - ä»»åŠ¡åˆ—è¡¨</title>
    <script src="https://res.gemcoder.com/js/reload.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
                  theme: {
                      extend: {
                          colors: {
                              primary: '#667eea',
                              secondary: '#764ba2',
                              task: '#fff3cd',
                              completed: '#f3f4f6',
                              highPriority: '#ef4444',
                              mediumPriority: '#f59e0b',
                              lowPriority: '#10b981'
                          },
                          spacing: {
                              '5.5': '1.375rem',
                          }
                      }
                  }
              };
    </script>
    <style type="text/tailwindcss">
      @layer utilities {
          .content-auto {
              content-visibility: auto;
          }
          .bg-gradient-primary {
              background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          }
          .text-shadow {
              text-shadow: 0 2px 4px rgba(0,0,0,0.1);
          }
          .task-card {
              @apply bg-white rounded-xl p-4 shadow-sm border border-gray-100 transition-all duration-200 hover:shadow-md;
          }
          .task-completed {
              @apply bg-completed text-gray-400 line-through;
          }
          .task-high {
              @apply border-l-4 border-highPriority;
          }
          .task-medium {
              @apply border-l-4 border-mediumPriority;
          }
          .task-low {
              @apply border-l-4 border-lowPriority;
          }
          .recording-button {
              @apply w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-primary flex items-center justify-center shadow-lg transition-transform duration-200 active:scale-95;
          }
          .filter-active {
              @apply bg-primary text-white;
          }
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- [MODULE] abc_ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="flex flex-col h-screen">
      <!-- [MODULE] d23_é¡¶éƒ¨å¯¼èˆªæ  -->
      <header
        class="h-16 flex items-center justify-between px-6 bg-white shadow-sm"
      >
        <!-- [MODULE] 56h_é¡¶éƒ¨å¯¼èˆªæ :è¿”å›æŒ‰é’® -->
        <div>
          <button
            class="text-gray-500 hover:text-gray-800 transition-colors"
            id="back-button"
          >
            <i class="fas fa-arrow-left text-lg"> </i>
          </button>
        </div>
        <!-- [/MODULE] 56h_é¡¶éƒ¨å¯¼èˆªæ :è¿”å›æŒ‰é’® -- ç‚¹å‡»è¿”å›ä¸Šä¸€é¡µ -->
        <!-- [MODULE] 33f_é¡¶éƒ¨å¯¼èˆªæ :é¡µé¢æ ‡é¢˜ -->
        <div class="flex items-center">
          <span class="text-xl font-bold mr-2"> ğŸ“ </span>
          <span class="text-xl font-bold text-gray-800"> ä»»åŠ¡åˆ—è¡¨ </span>
        </div>
        <!-- [/MODULE] 33f_é¡¶éƒ¨å¯¼èˆªæ :é¡µé¢æ ‡é¢˜ -- æ˜¾ç¤ºé¡µé¢å›¾æ ‡ã€æ ‡é¢˜å’Œä»»åŠ¡æ€»æ•° -->
        <!-- [MODULE] 45g_é¡¶éƒ¨å¯¼èˆªæ :è®¾ç½®æŒ‰é’® -->
        <div>
          <button
            class="text-gray-500 hover:text-gray-800 transition-colors"
            id="settings-btn"
          >
            <i class="fas fa-cog text-lg"> </i>
          </button>
        </div>
        <!-- [/MODULE] 45g_é¡¶éƒ¨å¯¼èˆªæ :è®¾ç½®æŒ‰é’® -->
      </header>
      <!-- [/MODULE] d23_é¡¶éƒ¨å¯¼èˆªæ  -- åŒ…å«è¿”å›æŒ‰é’®ã€é¡µé¢æ ‡é¢˜å’Œæœç´¢æŒ‰é’® -->
      <!-- [MODULE] e7h_æœç´¢ç­›é€‰åŒºåŸŸ -->
      <div class="bg-white px-6 py-4 shadow-sm">
        <!-- [MODULE] f8j_æœç´¢ç­›é€‰åŒºåŸŸ:æœç´¢æ¡† -->
        <div class="relative mb-4">
          <input
            class="w-full py-3 px-4 pl-10 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
            id="search-input"
            placeholder="ğŸ” æœç´¢ä»»åŠ¡..."
            type="text"
          />
        </div>
        <!-- [/MODULE] f8j_æœç´¢ç­›é€‰åŒºåŸŸ:æœç´¢æ¡† -- ç”¨äºæœç´¢ä»»åŠ¡å†…å®¹ -->
        <!-- [MODULE] g9k_æœç´¢ç­›é€‰åŒºåŸŸ:ç­›é€‰æ ‡ç­¾ -->
        <div class="flex overflow-x-auto pb-2 space-x-2 hide-scrollbar">
          <button
            class="filter-active whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-colors"
            data-filter="all"
          >
            å…¨éƒ¨
          </button>
          <button
            class="whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 transition-colors"
            data-filter="today"
          >
            ä»Šå¤©
          </button>
          <button
            class="whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 transition-colors"
            data-filter="tomorrow"
          >
            æ˜å¤©
          </button>
          <button
            class="whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 transition-colors"
            data-filter="week"
          >
            æœ¬å‘¨
          </button>
          <button
            class="whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 transition-colors"
            data-filter="completed"
          >
            å·²å®Œæˆ
          </button>
        </div>
        <!-- [/MODULE] g9k_æœç´¢ç­›é€‰åŒºåŸŸ:ç­›é€‰æ ‡ç­¾ -- æä¾›ä»»åŠ¡åˆ†ç±»ç­›é€‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬å…¨éƒ¨ã€ä»Šå¤©ã€æ˜å¤©ã€æœ¬å‘¨å’Œå·²å®Œæˆ -->
      </div>
      <!-- [/MODULE] e7h_æœç´¢ç­›é€‰åŒºåŸŸ -- åŒ…å«æœç´¢æ¡†å’Œç­›é€‰æ ‡ç­¾ï¼Œç”¨äºä»»åŠ¡æŸ¥æ‰¾å’Œåˆ†ç±» -->
      <!-- [MODULE] h0l_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ -->
      <main class="flex-grow overflow-y-auto bg-gray-50 px-4 py-6 h-[704px]">
        <!-- [MODULE] z2x_æ‰¹é‡æ“ä½œå·¥å…·æ  -->
        <div
          class="hidden bg-white rounded-xl p-3 mb-4 shadow-sm flex items-center justify-between"
          id="batch-toolbar"
        >
          <div class="flex items-center">
            <i class="fas fa-check-square text-primary mr-2"> </i>
            <span id="selected-count"> å·²é€‰æ‹© 0 ä¸ªä»»åŠ¡ </span>
          </div>
          <div class="flex space-x-3">
            <button
              class="px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors"
              id="toolbar-complete"
            >
              <i class="fas fa-check mr-1"> </i>
              å®Œæˆ
            </button>
            <button
              class="px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors"
              id="toolbar-delete"
            >
              <i class="fas fa-trash mr-1"> </i>
              åˆ é™¤
            </button>
            <button
              class="px-3 py-1 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
              id="toolbar-cancel"
            >
              <i class="fas fa-times mr-1"> </i>
              å–æ¶ˆ
            </button>
          </div>
        </div>
        <!-- [/MODULE] z2x_æ‰¹é‡æ“ä½œå·¥å…·æ  -- æ‰¹é‡é€‰æ‹©æ¨¡å¼ä¸‹æ˜¾ç¤ºçš„é¡¶éƒ¨æ“ä½œæ ï¼ŒåŒ…å«å·²é€‰æ‹©ä»»åŠ¡æ•°é‡å’Œæ“ä½œæŒ‰é’® -->
        <main class="flex-grow overflow-y-auto bg-gray-50 px-4 py-6">
          <!-- [MODULE] i1m_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„ -->
          <div class="mb-8">
            <div class="flex items-center mb-4">
              <span class="text-gray-500 mr-2"> ğŸ“… </span>
              <h2 class="text-lg font-semibold text-gray-800">
                ä»Šå¤© (3ä¸ªä»»åŠ¡ç»„ + 2ä¸ªç‹¬ç«‹ä»»åŠ¡)
              </h2>
            </div>
            <!-- [MODULE] j2n_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„:ä¼šè®®å‡†å¤‡ç»„ -->
            <div class="task-card bg-blue-50 rounded-2xl mb-4 overflow-hidden">
              <div
                class="task-group-header flex justify-between items-center p-4 cursor-pointer group-toggle"
                data-group-id="meeting-prep"
              >
                <div class="font-medium text-gray-800 flex items-center">
                  <i class="fas fa-list-check mr-2"> </i>
                  ä¼šè®®å‡†å¤‡
                </div>
                <div class="relative group">
                  <button
                    class="text-gray-500 hover:text-gray-800 transition-colors group-expand-btn flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100"
                  >
                    <i class="fas fa-ellipsis-v"> </i>
                  </button>
                  <!-- [MODULE] a1b_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»»åŠ¡ç»„æ“ä½œèœå• -->
                  <div
                    class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 hidden group-menu"
                  >
                    <button
                      class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 group-action-btn"
                      data-action="edit"
                    >
                      ç¼–è¾‘ç»„å
                    </button>
                    <button
                      class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 group-action-btn"
                      data-action="add-task"
                    >
                      æ·»åŠ å­ä»»åŠ¡
                    </button>
                    <button
                      class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 group-action-btn"
                      data-action="stats"
                    >
                      æŸ¥çœ‹ç»Ÿè®¡
                    </button>
                    <button
                      class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 group-action-btn"
                      data-action="delete"
                    >
                      åˆ é™¤ä»»åŠ¡ç»„
                    </button>
                  </div>
                  <!-- [/MODULE] a1b_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»»åŠ¡ç»„æ“ä½œèœå• -- åŒ…å«ç¼–è¾‘ç»„åã€æ·»åŠ å­ä»»åŠ¡ã€æŸ¥çœ‹ç»Ÿè®¡å’Œåˆ é™¤ä»»åŠ¡ç»„åŠŸèƒ½ -->
                </div>
              </div>
              <div class="task-group-items pl-6 bg-blue-50/50 group-items">
                <!-- å­ä»»åŠ¡1 -->
                <div class="flex items-start py-2 border-b border-blue-100">
                  <div class="mr-3 mt-1">
                    <input
                      checked
                      class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                      type="checkbox"
                    />
                  </div>
                  <div class="flex-grow">
                    <div
                      class="font-medium text-gray-800 line-through text-gray-500"
                    >
                      é¢„å®šä¼šè®®å®¤
                    </div>
                    <div class="text-sm text-gray-500 mt-1">
                      <span
                        class="bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded mr-2"
                      >
                        15min
                      </span>
                      <i class="far fa-clock mr-1"> </i>
                      14:00
                      <i class="fas fa-map-marker-alt ml-3 mr-1"> </i>
                      3æ¥¼ä¼šè®®å®¤
                    </div>
                    <div class="flex justify-end mt-1">
                      <button
                        class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                      >
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-btn text-red-600 hover:text-red-800 text-sm"
                      >
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- å­ä»»åŠ¡2 -->
                <div class="flex items-start py-2 border-b border-blue-100">
                  <div class="mr-3 mt-1">
                    <input
                      class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                      type="checkbox"
                    />
                  </div>
                  <div class="flex-grow">
                    <div class="font-medium text-gray-800">å‡†å¤‡PPT</div>
                    <div class="text-sm text-gray-500 mt-1">
                      <span
                        class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded mr-2"
                      >
                        30min
                      </span>
                      <i class="far fa-clock mr-1"> </i>
                      16:00
                      <i class="fas fa-map-marker-alt ml-3 mr-1"> </i>
                      æœ¬åœ°æ¡Œé¢
                    </div>
                    <div class="flex justify-end mt-1">
                      <button
                        class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                      >
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-btn text-red-600 hover:text-red-800 text-sm"
                      >
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- å­ä»»åŠ¡3 -->
                <div class="flex items-start py-2">
                  <div class="mr-3 mt-1">
                    <input
                      class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                      type="checkbox"
                    />
                  </div>
                  <div class="flex-grow">
                    <div class="font-medium text-gray-800">è”ç³»å‚ä¼šäººå‘˜</div>
                    <div class="text-sm text-gray-500 mt-1">
                      <span
                        class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded mr-2"
                      >
                        20min
                      </span>
                      <i class="far fa-clock mr-1"> </i>
                      17:00
                      <span class="ml-3"> æ— åœ°ç‚¹ </span>
                    </div>
                    <div class="flex justify-end mt-1">
                      <button
                        class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                      >
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-btn text-red-600 hover:text-red-800 text-sm"
                      >
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- ç»„è¿›åº¦ -->
                <div class="p-3 bg-blue-50/30 mt-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600"> ğŸ“Š ç»„è¿›åº¦ï¼š1/3 å®Œæˆ </span>
                    <div class="w-24 bg-gray-200 rounded-full h-2">
                      <div
                        class="bg-green-500 h-2 rounded-full"
                        style="width: 33%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- [/MODULE] j2n_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„:ä¼šè®®å‡†å¤‡ç»„ -->
            <!-- [MODULE] k3o_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„:ç”Ÿæ´»é‡‡è´­ç»„ -->
            <div class="task-card bg-blue-50 rounded-2xl mb-4 overflow-hidden">
              <div
                class="task-group-header flex justify-between items-center p-4 cursor-pointer group-toggle"
                data-group-id="shopping"
              >
                <div class="font-medium text-gray-800 flex items-center">
                  <i class="fas fa-shopping-basket mr-2"> </i>
                  ç”Ÿæ´»é‡‡è´­
                </div>
                <button
                  class="text-gray-500 hover:text-gray-800 transition-colors group-expand-btn"
                >
                  <i class="fas fa-ellipsis-v"> </i>
                </button>
              </div>
              <div class="task-group-items pl-6 bg-blue-50/50 group-items">
                <!-- å­ä»»åŠ¡ -->
                <div class="flex items-start py-2">
                  <div class="mr-3 mt-1">
                    <input
                      class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                      type="checkbox"
                    />
                  </div>
                  <div class="flex-grow">
                    <div class="font-medium text-gray-800">ä¹°èœåšæ™šé¥­</div>
                    <div class="text-sm text-gray-500 mt-1">
                      <span
                        class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded mr-2"
                      >
                        45min
                      </span>
                      <i class="far fa-clock mr-1"> </i>
                      18:30
                      <i class="fas fa-map-marker-alt ml-3 mr-1"> </i>
                      è¶…å¸‚
                    </div>
                    <div class="flex justify-end mt-1">
                      <button
                        class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                      >
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-btn text-red-600 hover:text-red-800 text-sm"
                      >
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- ç»„è¿›åº¦ -->
                <div class="p-3 bg-blue-50/30 mt-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600"> ğŸ“Š ç»„è¿›åº¦ï¼š0/1 å®Œæˆ </span>
                    <div class="w-24 bg-gray-200 rounded-full h-2">
                      <div
                        class="bg-green-500 h-2 rounded-full"
                        style="width: 0%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- [/MODULE] k3o_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„:ç”Ÿæ´»é‡‡è´­ç»„ -->
            <!-- [MODULE] l4p_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„:ç‹¬ç«‹ä»»åŠ¡ -->
            <div class="task-card bg-white rounded-2xl mb-4 overflow-hidden">
              <div class="flex items-start p-4">
                <div class="mr-3 mt-1">
                  <input
                    class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                    type="checkbox"
                  />
                </div>
                <div class="flex-grow">
                  <div class="font-medium text-gray-800">
                    ç‹¬ç«‹ä»»åŠ¡ï¼šå¥èº«é”»ç‚¼
                  </div>
                  <div class="text-sm text-gray-500 mt-1">
                    <i class="far fa-clock mr-1"> </i>
                    19:00
                    <i class="fas fa-map-marker-alt ml-3 mr-1"> </i>
                    å¥èº«æˆ¿
                  </div>
                  <div class="flex justify-end mt-1">
                    <button
                      class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                    >
                      ç¼–è¾‘
                    </button>
                    <button
                      class="delete-btn text-red-600 hover:text-red-800 text-sm"
                    >
                      åˆ é™¤
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!-- [/MODULE] l4p_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„:ç‹¬ç«‹ä»»åŠ¡ -->
          </div>
          <!-- [/MODULE] i1m_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:ä»Šå¤©ä»»åŠ¡ç»„ -->
          <!-- [MODULE] m5q_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:æ˜å¤©ä»»åŠ¡ç»„ -->
          <div class="mb-8">
            <div class="flex items-center mb-4">
              <span class="text-gray-500 mr-2"> ğŸ“… </span>
              <h2 class="text-lg font-semibold text-gray-800">
                æ˜å¤© (2ä¸ªä»»åŠ¡ç»„)
              </h2>
            </div>
            <!-- [MODULE] n6r_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:æ˜å¤©ä»»åŠ¡ç»„:å‘¨æŠ¥å‡†å¤‡ç»„ -->
            <div class="task-card bg-blue-50 rounded-2xl mb-4 overflow-hidden">
              <div
                class="task-group-header flex justify-between items-center p-4 cursor-pointer group-toggle"
                data-group-id="weekly-report"
              >
                <div class="font-medium text-gray-800 flex items-center">
                  <i class="fas fa-file-alt mr-2"> </i>
                  å‘¨æŠ¥å‡†å¤‡
                </div>
                <button
                  class="text-gray-500 hover:text-gray-800 transition-colors group-expand-btn"
                >
                  <i class="fas fa-ellipsis-v"> </i>
                </button>
              </div>
              <div class="task-group-items pl-6 bg-blue-50/50 group-items">
                <!-- å­ä»»åŠ¡1 -->
                <div class="flex items-start py-2 border-b border-blue-100">
                  <div class="mr-3 mt-1">
                    <input
                      class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                      type="checkbox"
                    />
                  </div>
                  <div class="flex-grow">
                    <div class="font-medium text-gray-800">æ•´ç†æœ¬å‘¨å·¥ä½œ</div>
                    <div class="text-sm text-gray-500 mt-1">
                      <span
                        class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded"
                      >
                        60min
                      </span>
                    </div>
                    <div class="flex justify-end mt-1">
                      <button
                        class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                      >
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-btn text-red-600 hover:text-red-800 text-sm"
                      >
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- å­ä»»åŠ¡2 -->
                <div class="flex items-start py-2">
                  <div class="mr-3 mt-1">
                    <input
                      class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500"
                      type="checkbox"
                    />
                  </div>
                  <div class="flex-grow">
                    <div class="font-medium text-gray-800">åˆ¶ä½œå‘¨æŠ¥PPT</div>
                    <div class="text-sm text-gray-500 mt-1">
                      <span
                        class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded"
                      >
                        90min
                      </span>
                    </div>
                    <div class="flex justify-end mt-1">
                      <button
                        class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3"
                      >
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-btn text-red-600 hover:text-red-800 text-sm"
                      >
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- ç»„è¿›åº¦ -->
                <div class="p-3 bg-blue-50/30 mt-2">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600"> ğŸ“Š ç»„è¿›åº¦ï¼š0/2 å®Œæˆ </span>
                    <div class="w-24 bg-gray-200 rounded-full h-2">
                      <div
                        class="bg-green-500 h-2 rounded-full"
                        style="width: 0%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- [/MODULE] n6r_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:æ˜å¤©ä»»åŠ¡ç»„:å‘¨æŠ¥å‡†å¤‡ç»„ -->
          </div>
          <!-- [/MODULE] m5q_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ:æ˜å¤©ä»»åŠ¡ç»„ -->
        </main>
        <!-- [/MODULE] h0l_ä»»åŠ¡åˆ—è¡¨åŒºåŸŸ -- æŒ‰æ—¥æœŸåˆ†ç»„æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…å«ä»Šå¤©ã€æ˜å¤©å’Œæœ¬å‘¨ä¸‰ä¸ªä»»åŠ¡ç»„ -->
      </main>
    </div>
    <!-- [/MODULE] abc_ä¸»å†…å®¹åŒºåŸŸ -- TaskAIä»»åŠ¡åˆ—è¡¨é¡µé¢ï¼Œæä¾›å®Œæ•´çš„ä»»åŠ¡ç®¡ç†åŠŸèƒ½ -->
    <!-- [JSMOD] k9d_æ‰¹é‡é€‰æ‹©åŠŸèƒ½ -->
    <script id="batch-selection-script">
      document.addEventListener('DOMContentLoaded', () => {
            const batchToolbar = document.getElementById('batch-toolbar');
            const selectedCount = document.getElementById('selected-count');
            const toolbarComplete = document.getElementById('toolbar-complete');
            const toolbarDelete = document.getElementById('toolbar-delete');
            const toolbarCancel = document.getElementById('toolbar-cancel');
            const taskCards = document.querySelectorAll('.task-card');

            let selectedTasks = [];
            let longPressTimer = null;
            let isBatchMode = false;

            // åˆå§‹åŒ–ä»»åŠ¡å¡ç‰‡äº‹ä»¶ç›‘å¬
            function initTaskEvents() {
              document.querySelectorAll('.task-card').forEach(card => {
                // é•¿æŒ‰äº‹ä»¶
                card.addEventListener('mousedown', startLongPress);
                card.addEventListener('touchstart', startLongPress, { passive: true });

                // å–æ¶ˆé•¿æŒ‰
                card.addEventListener('mouseup', cancelLongPress);
                card.addEventListener('mouseleave', cancelLongPress);
                card.addEventListener('touchend', cancelLongPress);
                card.addEventListener('touchcancel', cancelLongPress);

                // ç‚¹å‡»é€‰æ‹©
                card.addEventListener('click', (e) => {
                  if (isBatchMode && !e.target.closest('button')) {
                    toggleTaskSelection(card);
                  }
                });
              });
            }

            // å¼€å§‹é•¿æŒ‰è®¡æ—¶
            function startLongPress(e) {
              if (!isBatchMode && !e.target.closest('button')) {
                const card = e.currentTarget;
                longPressTimer = setTimeout(() => {
                  enterBatchMode();
                  toggleTaskSelection(card);
                }, 500);
              }
            }

            // å–æ¶ˆé•¿æŒ‰è®¡æ—¶
            function cancelLongPress() {
              clearTimeout(longPressTimer);
            }

            // è¿›å…¥æ‰¹é‡é€‰æ‹©æ¨¡å¼
            function enterBatchMode() {
              isBatchMode = true;
              batchToolbar.classList.remove('hidden');
              document.querySelectorAll('.task-card').forEach(card => {
                card.classList.add('cursor-pointer');
                card.style.transition = 'transform 0.2s';
              });
            }

            // é€€å‡ºæ‰¹é‡é€‰æ‹©æ¨¡å¼
            function exitBatchMode() {
              isBatchMode = false;
              batchToolbar.classList.add('hidden');
              selectedTasks = [];
              updateSelectedCount();
              document.querySelectorAll('.task-card').forEach(card => {
                card.classList.remove('cursor-pointer', 'ring-2', 'ring-primary', 'scale-102');
                card.removeAttribute('data-selected');
              });
            }

            // åˆ‡æ¢ä»»åŠ¡é€‰æ‹©çŠ¶æ€
            function toggleTaskSelection(card) {
              const taskId = card.dataset.taskId;
              const index = selectedTasks.indexOf(taskId);

              if (index > -1) {
                // å–æ¶ˆé€‰æ‹©
                selectedTasks.splice(index, 1);
                card.classList.remove('ring-2', 'ring-primary', 'scale-102');
                card.removeAttribute('data-selected');
              } else {
                // é€‰æ‹©ä»»åŠ¡
                selectedTasks.push(taskId);
                card.classList.add('ring-2', 'ring-primary', 'scale-102');
                card.setAttribute('data-selected', 'true');
              }

              updateSelectedCount();
            }

            // æ›´æ–°é€‰æ‹©æ•°é‡æ˜¾ç¤º
            function updateSelectedCount() {
              selectedCount.textContent = `å·²é€‰æ‹© ${selectedTasks.length} ä¸ªä»»åŠ¡`;
            }

            // æ‰¹é‡å®Œæˆä»»åŠ¡
            toolbarComplete.addEventListener('click', () => {
              if (selectedTasks.length > 0) {
                // è¿™é‡Œæ·»åŠ æ‰¹é‡å®Œæˆé€»è¾‘
                alert(`å·²å®Œæˆ ${selectedTasks.length} ä¸ªä»»åŠ¡`);
                exitBatchMode();
              }
            });

            // æ‰¹é‡åˆ é™¤ä»»åŠ¡
            toolbarDelete.addEventListener('click', () => {
              if (selectedTasks.length > 0) {
                // æ·»åŠ æ‰¹é‡åˆ é™¤é€»è¾‘
                alert(`å·²åˆ é™¤ ${selectedTasks.length} ä¸ªä»»åŠ¡`);
                exitBatchMode();
              }
            });

            // å–æ¶ˆæ‰¹é‡é€‰æ‹©
            toolbarCancel.addEventListener('click', exitBatchMode);

            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
            initTaskEvents();
          });
    </script>
    <!-- [/JSMOD] k9d_æ‰¹é‡é€‰æ‹©åŠŸèƒ½ -- å®ç°é•¿æŒ‰ä»»åŠ¡è¿›å…¥æ‰¹é‡é€‰æ‹©æ¨¡å¼ï¼Œé¡¶éƒ¨æ˜¾ç¤ºæ“ä½œå·¥å…·æ  -->
    <!-- [JSMOD] 1a2_ä»»åŠ¡ç»„å±•å¼€æ”¶èµ·åŠŸèƒ½ -->
    <script id="task-group-toggle">
      document.addEventListener('DOMContentLoaded', () => {
            // ä»»åŠ¡ç»„å±•å¼€/æ”¶èµ·åŠŸèƒ½
            const groupToggles = document.querySelectorAll('.group-toggle');
            groupToggles.forEach(toggle => {
              toggle.addEventListener('click', () => {
                const groupId = toggle.getAttribute('data-group-id');
                const groupItems = toggle.nextElementSibling;

                // åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
                if (groupItems.style.display === 'none') {
                  groupItems.style.display = 'block';
                } else {
                  groupItems.style.display = 'none';
                }
              });
            });
          });
    </script>
    <!-- [/JSMOD] 1a2_ä»»åŠ¡ç»„å±•å¼€æ”¶èµ·åŠŸèƒ½ -- ç‚¹å‡»ä»»åŠ¡ç»„æ ‡é¢˜å±•å¼€æˆ–æ”¶èµ·å­ä»»åŠ¡åˆ—è¡¨ -->
    <!-- [JSMOD] 3c4_ä»»åŠ¡å¤é€‰æ¡†çŠ¶æ€åˆ‡æ¢åŠŸèƒ½ -->
    <script id="task-checkbox-toggle">
      document.addEventListener('DOMContentLoaded', () => {
            // ä»»åŠ¡å¤é€‰æ¡†çŠ¶æ€åˆ‡æ¢
            const taskCheckboxes = document.querySelectorAll('.task-checkbox');
            taskCheckboxes.forEach(checkbox => {
              checkbox.addEventListener('change', () => {
                const taskText = checkbox.nextElementSibling.querySelector('.font-medium');

                if (checkbox.checked) {
                  taskText.classList.add('line-through', 'text-gray-500');
                } else {
                  taskText.classList.remove('line-through', 'text-gray-500');
                }

                // æ›´æ–°ä»»åŠ¡ç»„è¿›åº¦
                updateGroupProgress(checkbox.closest('.task-group-items'));
              });
            });

            // æ›´æ–°ä»»åŠ¡ç»„è¿›åº¦
            function updateGroupProgress(groupItems) {
              if (!groupItems) return;

              const groupCard = groupItems.closest('.task-card');
              const checkboxes = groupItems.querySelectorAll('.task-checkbox');
              const total = checkboxes.length;
              const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
              const progressPercent = Math.round((completed / total) * 100);

              // æ›´æ–°è¿›åº¦æ–‡æœ¬å’Œè¿›åº¦æ¡
              const progressText = groupCard.querySelector('.text-gray-600');
              const progressBar = groupCard.querySelector('.bg-green-500');

              if (progressText && progressBar) {
                progressText.textContent = `ğŸ“Š ç»„è¿›åº¦ï¼š${completed}/${total} å®Œæˆ`;
                progressBar.style.width = `${progressPercent}%`;
              }
            }
          });
    </script>
    <!-- [/JSMOD] 3c4_ä»»åŠ¡å¤é€‰æ¡†çŠ¶æ€åˆ‡æ¢åŠŸèƒ½ -- åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€å¹¶æ›´æ–°ä»»åŠ¡ç»„è¿›åº¦ -->
    <!-- [JSMOD] a7b_æ‰¹é‡é€‰æ‹©æ¨¡å¼åŠŸèƒ½ -->
    <script id="batch-selection">
      document.addEventListener('DOMContentLoaded', () => {
            let batchMode = false;
            const taskItems = document.querySelectorAll('.task-card, .flex.items-start.py-2');
            const header = document.querySelector('header');
            let selectedCount = 0;

            // åˆ›å»ºæ‰¹é‡æ“ä½œæ 
            const batchActionBar = document.createElement('div');
            batchActionBar.className = 'fixed top-0 left-0 right-0 bg-white shadow-md p-4 z-50 hidden';
            batchActionBar.innerHTML = `







      <div class="flex justify-between items-center">
        <div>å·²é€‰æ‹© <span id="selected-count">0</span> ä¸ªä»»åŠ¡</div>
          <div>
            <button id="batch-complete" class="bg-green-500 text-white px-3 py-1 rounded mr-2">æ ‡è®°å®Œæˆ</button>
              <button id="batch-delete" class="bg-red-500 text-white px-3 py-1 rounded mr-2">åˆ é™¤</button>
                <button id="batch-cancel" class="bg-gray-200 text-gray-800 px-3 py-1 rounded">å–æ¶ˆ</button>
                </div>
              </div>







            `;
            document.body.prepend(batchActionBar);

            // é•¿æŒ‰ä»»åŠ¡é¡¹è¿›å…¥æ‰¹é‡é€‰æ‹©æ¨¡å¼
            taskItems.forEach(item => {
              let pressTimer = null;

              item.addEventListener('mousedown', (e) => {
                if (e.target.closest('button, input')) return;

                pressTimer = setTimeout(() => {
                  enterBatchMode();
                  toggleTaskSelection(item);
                }, 500);
              });

              item.addEventListener('mouseup', () => {
                clearTimeout(pressTimer);
              });

              item.addEventListener('mouseleave', () => {
                clearTimeout(pressTimer);
              });

              // æ‰¹é‡æ¨¡å¼ä¸‹ç‚¹å‡»é€‰æ‹©ä»»åŠ¡
              item.addEventListener('click', (e) => {
                if (batchMode && !e.target.closest('button, input')) {
                  e.stopPropagation();
                  toggleTaskSelection(item);
                }
              });
            });

            // è¿›å…¥æ‰¹é‡é€‰æ‹©æ¨¡å¼
            function enterBatchMode() {
              if (batchMode) return;

              batchMode = true;
              batchActionBar.classList.remove('hidden');
              header.classList.add('hidden');

              // å…¨é€‰æ‰€æœ‰ä»»åŠ¡
              document.getElementById('batch-complete').addEventListener('click', () => {
                if (confirm(`ç¡®å®šè¦æ ‡è®° ${selectedCount} ä¸ªä»»åŠ¡ä¸ºå®Œæˆå—ï¼Ÿ`)) {
                  // æ ‡è®°å®Œæˆé€»è¾‘...
                  exitBatchMode();
                }
              });

              // æ‰¹é‡åˆ é™¤
              document.getElementById('batch-delete').addEventListener('click', () => {
                if (confirm(`ç¡®å®šè¦åˆ é™¤ ${selectedCount} ä¸ªä»»åŠ¡å—ï¼Ÿ`)) {
                  // åˆ é™¤é€»è¾‘...
                  exitBatchMode();
                }
              });

              // å–æ¶ˆæ‰¹é‡é€‰æ‹©
              document.getElementById('batch-cancel').addEventListener('click', exitBatchMode);
            }

            // é€€å‡ºæ‰¹é‡é€‰æ‹©æ¨¡å¼
            function exitBatchMode() {
              batchMode = false;
              batchActionBar.classList.add('hidden');
              header.classList.remove('hidden');
              selectedCount = 0;

              // æ¸…é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
              document.querySelectorAll('.task-card, .flex.items-start.py-2').forEach(item => {
                item.classList.remove('bg-blue-100');
              });

              document.getElementById('selected-count').textContent = '0';
            }

            // åˆ‡æ¢ä»»åŠ¡é€‰æ‹©çŠ¶æ€
            function toggleTaskSelection(item) {
              item.classList.toggle('bg-blue-100');

              if (item.classList.contains('bg-blue-100')) {
                selectedCount++;
              } else {
                selectedCount--;
              }

              document.getElementById('selected-count').textContent = selectedCount;
            }
          });
    </script>
    <!-- [/JSMOD] a7b_æ‰¹é‡é€‰æ‹©æ¨¡å¼åŠŸèƒ½ -- é•¿æŒ‰ä»»åŠ¡é¡¹è¿›å…¥æ‰¹é‡é€‰æ‹©æ¨¡å¼ï¼Œæ”¯æŒæ‰¹é‡æ ‡è®°å®Œæˆå’Œåˆ é™¤ -->
    <!-- [JSMOD] b0f_ä»»åŠ¡äº¤äº’åŠŸèƒ½ -->
    <script id="task-interaction-script">
      document.addEventListener('DOMContentLoaded', () => {
                  // ä»»åŠ¡å¤é€‰æ¡†äº¤äº’
                  const taskCheckboxes = document.querySelectorAll('.task-checkbox');
                  taskCheckboxes.forEach(checkbox => {
                      checkbox.addEventListener('change', function() {
                          const taskCard = this.closest('.task-card');
                          if (this.checked) {
                              taskCard.classList.add('task-completed');
                              taskCard.classList.remove('task-high', 'task-medium', 'task-low');
                          } else {
                              taskCard.classList.remove('task-completed');
                              // æ ¹æ®ä»»åŠ¡å†…å®¹æ¢å¤ä¼˜å…ˆçº§æ ·å¼
                              if (taskCard.querySelector('.font-medium').textContent.includes('é¡¹ç›®è¯„å®¡ä¼šè®®')) {
                                  taskCard.classList.add('task-high');
                              } else if (taskCard.querySelector('.font-medium').textContent.includes('å‡†å¤‡å‘¨æŠ¥ææ–™') ||
                                        taskCard.querySelector('.font-medium').textContent.includes('æ›´æ–°é¡¹ç›®è¿›åº¦') ||
                                        taskCard.querySelector('.font-medium').textContent.includes('åˆ¶å®šä¸‹å‘¨è®¡åˆ’') ||
                                        taskCard.querySelector('.font-medium').textContent.includes('å›¢é˜ŸæŠ€èƒ½åŸ¹è®­')) {
                                  taskCard.classList.add('task-medium');
                              } else {
                                  taskCard.classList.add('task-low');
                              }
                          }
                      });
                  });

                  // ç­›é€‰æ ‡ç­¾äº¤äº’
                  const filterButtons = document.querySelectorAll('[data-filter]');
                  filterButtons.forEach(button => {
                      button.addEventListener('click', function() {
                          // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeçŠ¶æ€
                          filterButtons.forEach(btn => btn.classList.remove('filter-active'));
                          filterButtons.forEach(btn => btn.classList.add('bg-gray-100', 'text-gray-700'));

                          // æ·»åŠ å½“å‰æŒ‰é’®çš„activeçŠ¶æ€
                          this.classList.add('filter-active');
                          this.classList.remove('bg-gray-100', 'text-gray-700');

                          // æ ¹æ®ç­›é€‰æ¡ä»¶è¿‡æ»¤ä»»åŠ¡
                          const filter = this.getAttribute('data-filter');
                          filterTasks(filter);
                      });
                  });

                  // ä»»åŠ¡è¿‡æ»¤åŠŸèƒ½
                  function filterTasks(filter) {
                      const todayGroup = document.querySelector('h2:contains("ä»Šå¤©")').closest('div');
                      const tomorrowGroup = document.querySelector('h2:contains("æ˜å¤©")').closest('div');
                      const weekGroup = document.querySelector('h2:contains("æœ¬å‘¨")').closest('div');

                      switch(filter) {
                          case 'all':
                              todayGroup.style.display = 'block';
                              tomorrowGroup.style.display = 'block';
                              weekGroup.style.display = 'block';
                              break;
                          case 'today':
                              todayGroup.style.display = 'block';
                              tomorrowGroup.style.display = 'none';
                              weekGroup.style.display = 'none';
                              break;
                          case 'tomorrow':
                              todayGroup.style.display = 'none';
                              tomorrowGroup.style.display = 'block';
                              weekGroup.style.display = 'none';
                              break;
                          case 'week':
                              todayGroup.style.display = 'none';
                              tomorrowGroup.style.display = 'none';
                              weekGroup.style.display = 'block';
                              break;
                          case 'completed':
                              todayGroup.style.display = 'block';
                              tomorrowGroup.style.display = 'block';
                              weekGroup.style.display = 'block';

                              // éšè—æœªå®Œæˆä»»åŠ¡ï¼Œæ˜¾ç¤ºå·²å®Œæˆä»»åŠ¡
                              document.querySelectorAll('.task-card:not(.task-completed)').forEach(card => {
                                  card.style.display = 'none';
                              });
                              document.querySelectorAll('.task-card.task-completed').forEach(card => {
                                  card.style.display = 'block';
                              });

                              // å¦‚æœæŸä¸ªç»„æ²¡æœ‰å¯è§ä»»åŠ¡ï¼Œåˆ™éšè—è¯¥ç»„
                              if (todayGroup.querySelectorAll('.task-card.task-completed').length === 0) {
                                  todayGroup.style.display = 'none';
                              }
                              if (tomorrowGroup.querySelectorAll('.task-card.task-completed').length === 0) {
                                  tomorrowGroup.style.display = 'none';
                              }
                              if (weekGroup.querySelectorAll('.task-card.task-completed').length === 0) {
                                  weekGroup.style.display = 'none';
                              }
                              break;
                      }
                  }

                  // æœç´¢åŠŸèƒ½
                  const searchInput = document.getElementById('search-input');
                  searchInput.addEventListener('input', function() {
                      const searchTerm = this.value.toLowerCase().trim();
                      const taskCards = document.querySelectorAll('.task-card');

                      taskCards.forEach(card => {
                          const taskText = card.textContent.toLowerCase();
                          if (taskText.includes(searchTerm)) {
                              card.style.display = 'block';
                              // ç¡®ä¿åŒ…å«æœç´¢ç»“æœçš„ä»»åŠ¡ç»„å¯è§
                              card.closest('[class*="ä»»åŠ¡ç»„"]').style.display = 'block';
                          } else {
                              card.style.display = 'none';
                          }
                      });

                      // æ£€æŸ¥æ¯ä¸ªä»»åŠ¡ç»„æ˜¯å¦æœ‰å¯è§ä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰åˆ™éšè—è¯¥ç»„
                      const taskGroups = document.querySelectorAll('[class*="ä»»åŠ¡ç»„"]');
                      taskGroups.forEach(group => {
                          const visibleTasks = group.querySelectorAll('.task-card:not([style*="display: none"])');
                          if (visibleTasks.length === 0) {
                              group.style.display = 'none';
                          }
                      });
                  });

                  // è¿”å›æŒ‰é’®åŠŸèƒ½
                  const backButton = document.getElementById('back-button');
                  backButton.addEventListener('click', function() {
                      // åœ¨å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ˜¯è¿”å›ä¸Šä¸€é¡µçš„é€»è¾‘
                      window.history.back();
                  });

                  // æœç´¢æŒ‰é’®åŠŸèƒ½
                  const searchButton = document.getElementById('search-button');
                  searchButton.addEventListener('click', function() {
                      searchInput.focus();
                  });

                  // æ·»åŠ ä»»åŠ¡æŒ‰é’®åŠŸèƒ½ - æ¨¡æ‹Ÿæ·»åŠ ä»»åŠ¡
                  const addTaskButton = document.getElementById('add-task-button');
                  addTaskButton.addEventListener('click', function() {
                      // åˆ›å»ºæ–°ä»»åŠ¡å¼¹çª—
                      const modal = document.createElement('div');
                      modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-6';
                      modal.innerHTML = `









      <div class="bg-white rounded-2xl w-full max-w-md p-6 transform transition-all">
        <div class="text-center mb-6">
          <h2 class="text-xl font-bold text-gray-800">æ·»åŠ æ–°ä»»åŠ¡</h2>
          </div>
          <div class="mb-4">
            <input type="text" placeholder="ä»»åŠ¡åç§°" class="w-full py-3 px-4 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" id="new-task-name">
            </div>
            <div class="mb-4">
              <input type="text" placeholder="æ—¥æœŸæ—¶é—´" class="w-full py-3 px-4 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" id="new-task-time" value="ä»Šå¤© 15:30">
              </div>
              <div class="mb-6">
                <select class="w-full py-3 px-4 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" id="new-task-priority">
                  <option value="low">ä½ä¼˜å…ˆçº§</option>
                    <option value="medium" selected>ä¸­ä¼˜å…ˆçº§</option>
                      <option value="high">é«˜ä¼˜å…ˆçº§</option>
                      </select>
                    </div>
                    <button class="w-full py-3 bg-gradient-primary text-white rounded-xl font-medium shadow-lg transition-transform duration-200 active:scale-95" id="confirm-add-task">
                      æ·»åŠ ä»»åŠ¡
                    </button>
                    <button class="w-full py-3 mt-3 border border-gray-300 text-gray-700 rounded-xl font-medium transition-colors hover:bg-gray-50" id="cancel-add-task">
                      å–æ¶ˆ
                    </button>
                  </div>









                `;
                      document.body.appendChild(modal);

                      // ç¡®è®¤æ·»åŠ ä»»åŠ¡
                      modal.querySelector('#confirm-add-task').addEventListener('click', function() {
                          const taskName = modal.querySelector('#new-task-name').value;
                          if (taskName.trim()) {
                              // è¿™é‡Œä¼šæ˜¯å®é™…æ·»åŠ ä»»åŠ¡çš„é€»è¾‘
                              alert(`ä»»åŠ¡ "${taskName}" æ·»åŠ æˆåŠŸï¼`);
                              document.body.removeChild(modal);
                          } else {
                              alert('è¯·è¾“å…¥ä»»åŠ¡åç§°');
                          }
                      });

                      // å–æ¶ˆæ·»åŠ ä»»åŠ¡
                      modal.querySelector('#cancel-add-task').addEventListener('click', function() {
                          document.body.removeChild(modal);
                      });

                      // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
                      modal.addEventListener('click', function(e) {
                          if (e.target === modal) {
                              document.body.removeChild(modal);
                          }
                      });
                  });

                  // ä»»åŠ¡å¡ç‰‡æ»‘åŠ¨æ“ä½œ - æ¨¡æ‹Ÿå®ç°
                  const taskCards = document.querySelectorAll('.task-card');
                  taskCards.forEach(card => {
                      let startX, moveX, isDragging = false;

                      card.addEventListener('touchstart', function(e) {
                          startX = e.touches[0].clientX;
                          isDragging = true;
                      });

                      card.addEventListener('touchmove', function(e) {
                          if (!isDragging) return;
                          moveX = e.touches[0].clientX - startX;

                          // å³æ»‘æ˜¾ç¤ºå®Œæˆæ“ä½œ
                          if (moveX > 50) {
                              this.style.transform = `translateX(${moveX}px)`;
                              this.style.opacity = '0.8';
                          }
                          // å·¦æ»‘æ˜¾ç¤ºç¼–è¾‘/åˆ é™¤æ“ä½œ
                          else if (moveX < -50) {
                              this.style.transform = `translateX(${moveX}px)`;
                              this.style.opacity = '0.8';
                          }
                      });

                      card.addEventListener('touchend', function() {
                          isDragging = false;
                          // å³æ»‘è¶…è¿‡é˜ˆå€¼ï¼Œæ ‡è®°ä¸ºå®Œæˆ
                          if (moveX > 80) {
                              const checkbox = this.querySelector('.task-checkbox');
                              if (!checkbox.checked) {
                                  checkbox.checked = true;
                                  checkbox.dispatchEvent(new Event('change'));
                              }
                          }
                          // å·¦æ»‘è¶…è¿‡é˜ˆå€¼ï¼Œæ˜¾ç¤ºæ“ä½œé€‰é¡¹
                          else if (moveX < -80) {
                              alert('æ˜¾ç¤ºç¼–è¾‘/åˆ é™¤é€‰é¡¹');
                          }

                          // é‡ç½®å¡ç‰‡ä½ç½®
                          this.style.transform = 'translateX(0)';
                          this.style.opacity = '1';
                      });
                  });
              });
    </script>
    <!-- [/JSMOD] b0f_ä»»åŠ¡äº¤äº’åŠŸèƒ½ -- å®ç°ä»»åŠ¡å¤é€‰æ¡†çŠ¶æ€åˆ‡æ¢ã€ç­›é€‰æ ‡ç­¾åˆ‡æ¢ã€æœç´¢åŠŸèƒ½ã€ä»»åŠ¡æ·»åŠ ã€è¿”å›æŒ‰é’®å’Œæ»‘åŠ¨æ“ä½œç­‰äº¤äº’é€»è¾‘ -->
    <!-- [JSMOD] b2c_ä»»åŠ¡ç»„èœå•äº¤äº’ -->
    <script id="taskGroupMenu">
      document.addEventListener('DOMContentLoaded', () => {
            // ç‚¹å‡»ä»»åŠ¡ç»„æ“ä½œæŒ‰é’®æ˜¾ç¤º/éšè—èœå•
            const groupActionButtons = document.querySelectorAll('.group-expand-btn');
            groupActionButtons.forEach(button => {
              button.addEventListener('click', (e) => {
                e.stopPropagation();
                const menu = button.nextElementSibling;
                if (menu && menu.classList.contains('group-menu')) {
                  menu.classList.toggle('hidden');
                }
              });
            });

            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹éšè—æ‰€æœ‰èœå•
            document.addEventListener('click', () => {
              const menus = document.querySelectorAll('.group-menu');
              menus.forEach(menu => {
                menu.classList.add('hidden');
              });
            });
          });
    </script>
    <!-- [/JSMOD] b2c_ä»»åŠ¡ç»„èœå•äº¤äº’ -- æ§åˆ¶ä»»åŠ¡ç»„ä¸‹æ‹‰èœå•çš„æ˜¾ç¤ºå’Œéšè— -->
  </body>
  <!-- [MODULE] c3d_ç¼–è¾‘ç»„åå¼¹çª— -->
  <div
    id="editGroupNameModal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
  >
    <div class="bg-white rounded-xl p-6 w-5/6 max-w-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">ç¼–è¾‘ç»„å</h3>
      <input
        type="text"
        id="newGroupName"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary mb-4"
        placeholder="è¾“å…¥æ–°çš„ç»„å"
      />
      <div class="flex justify-end space-x-3">
        <button
          id="cancelEditGroupName"
          class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
        >
          å–æ¶ˆ
        </button>
        <button
          id="confirmEditGroupName"
          class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90"
        >
          ä¿å­˜
        </button>
      </div>
    </div>
  </div>
  <!-- [/MODULE] c3d_ç¼–è¾‘ç»„åå¼¹çª— -- ç”¨äºä¿®æ”¹ä»»åŠ¡ç»„åç§°çš„å¼¹çª— -->
  <!-- [JSMOD] d4e_ç¼–è¾‘ç»„ååŠŸèƒ½ -->
  <script id="editGroupName">
    document.addEventListener('DOMContentLoaded', () => {
          let currentGroupId = null;
          const modal = document.getElementById('editGroupNameModal');
          const input = document.getElementById('newGroupName');
          const cancelBtn = document.getElementById('cancelEditGroupName');
          const confirmBtn = document.getElementById('confirmEditGroupName');

          // ç‚¹å‡»ç¼–è¾‘ç»„åæŒ‰é’®
          document.querySelectorAll('.group-action-btn[data-action="edit"]').forEach(btn => {
            btn.addEventListener('click', (e) => {
              e.stopPropagation();
              const groupHeader = btn.closest('.task-group-header');
              currentGroupId = groupHeader.dataset.groupId;
              const currentName = groupHeader.querySelector('.font-medium').textContent.trim();

              input.value = currentName;
              modal.classList.remove('hidden');

              // éšè—èœå•
              btn.closest('.group-menu').classList.add('hidden');
            });
          });

          // å–æ¶ˆç¼–è¾‘
          cancelBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            currentGroupId = null;
          });

          // ç¡®è®¤ç¼–è¾‘
          confirmBtn.addEventListener('click', () => {
            if (currentGroupId && input.value.trim()) {
              const groupHeader = document.querySelector(`.task-group-header[data-group-id="${currentGroupId}"]`);
              if (groupHeader) {
                groupHeader.querySelector('.font-medium').textContent = input.value.trim();
              }
            }
            modal.classList.add('hidden');
            currentGroupId = null;
          });
        });
  </script>
  <!-- [/JSMOD] d4e_ç¼–è¾‘ç»„ååŠŸèƒ½ -- å¤„ç†ä»»åŠ¡ç»„åç§°çš„ä¿®æ”¹ -->
  <!-- [MODULE] e5f_æ·»åŠ å­ä»»åŠ¡å¼¹çª— -->
  <div
    id="addSubtaskModal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
  >
    <div class="bg-white rounded-xl p-6 w-5/6 max-w-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">æ·»åŠ å­ä»»åŠ¡</h3>
      <input
        type="text"
        id="subtaskName"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary mb-4"
        placeholder="ä»»åŠ¡åç§°"
      />
      <div class="grid grid-cols-2 gap-4 mb-4">
        <input
          type="text"
          id="subtaskTime"
          class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
          placeholder="è€—æ—¶ (åˆ†é’Ÿ)"
        />
        <input
          type="text"
          id="subtaskDeadline"
          class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"
          placeholder="æ—¶é—´ (HH:MM)"
        />
      </div>
      <input
        type="text"
        id="subtaskLocation"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary mb-4"
        placeholder="åœ°ç‚¹"
      />
      <div class="flex justify-end space-x-3">
        <button
          id="cancelAddSubtask"
          class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
        >
          å–æ¶ˆ
        </button>
        <button
          id="confirmAddSubtask"
          class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90"
        >
          æ·»åŠ 
        </button>
      </div>
    </div>
  </div>
  <!-- [/MODULE] e5f_æ·»åŠ å­ä»»åŠ¡å¼¹çª— -- ç”¨äºå‘ä»»åŠ¡ç»„æ·»åŠ æ–°çš„å­ä»»åŠ¡ -->
  <!-- [JSMOD] f6g_æ·»åŠ å­ä»»åŠ¡åŠŸèƒ½ -->
  <script id="addSubtask">
    document.addEventListener('DOMContentLoaded', () => {
          let currentGroupId = null;
          const modal = document.getElementById('addSubtaskModal');
          const nameInput = document.getElementById('subtaskName');
          const timeInput = document.getElementById('subtaskTime');
          const deadlineInput = document.getElementById('subtaskDeadline');
          const locationInput = document.getElementById('subtaskLocation');
          const cancelBtn = document.getElementById('cancelAddSubtask');
          const confirmBtn = document.getElementById('confirmAddSubtask');

          // ç‚¹å‡»æ·»åŠ å­ä»»åŠ¡æŒ‰é’®
          document.querySelectorAll('.group-action-btn[data-action="add-task"]').forEach(btn => {
            btn.addEventListener('click', (e) => {
              e.stopPropagation();
              const groupHeader = btn.closest('.task-group-header');
              currentGroupId = groupHeader.dataset.groupId;

              // é‡ç½®è¡¨å•
              nameInput.value = '';
              timeInput.value = '';
              deadlineInput.value = '';
              locationInput.value = '';

              modal.classList.remove('hidden');

              // éšè—èœå•
              btn.closest('.group-menu').classList.add('hidden');
            });
          });

          // å–æ¶ˆæ·»åŠ 
          cancelBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            currentGroupId = null;
          });

          // ç¡®è®¤æ·»åŠ 
          confirmBtn.addEventListener('click', () => {
            if (currentGroupId && nameInput.value.trim()) {
              const groupItems = document.querySelector(`.task-group-header[data-group-id="${currentGroupId}"] + .group-items`);
              if (groupItems) {
                // è·å–å½“å‰å­ä»»åŠ¡æ•°é‡
                const taskCount = groupItems.querySelectorAll('.flex.items-start.py-2').length;
                const isLastTask = taskCount === 0 || taskCount === groupItems.querySelectorAll('.border-b').length + 1;

                // åˆ›å»ºæ–°å­ä»»åŠ¡HTML
                const timeText = timeInput.value ? `${timeInput.value}min` : '';
                const deadlineText = deadlineInput.value ? deadlineInput.value : '';
                const locationText = locationInput.value ? locationInput.value : '';

                const newTask = document.createElement('div');
                newTask.className = `flex items-start py-2 ${isLastTask ? '' : 'border-b border-blue-100'}`;
                newTask.innerHTML = `

    <div class="mr-3 mt-1">
      <input class="task-checkbox w-5 h-5 rounded-full border-gray-300 text-green-500 focus:ring-green-500" type="checkbox"/>
    </div>
    <div class="flex-grow">
      <div class="font-medium text-gray-800">
        ${nameInput.value.trim()}
      </div>
      <div class="text-sm text-gray-500 mt-1">
        ${timeText ?
      `<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded mr-2">${timeText}</span>` : ''}
                    ${deadlineText ? `<i class="far fa-clock mr-1"></i>${deadlineText}` : ''}
                    ${locationText ? `<i class="fas fa-map-marker-alt ml-3 mr-1"></i>${locationText}` : ''}
                   </div>
                   <div class="flex justify-end mt-1">
                    <button class="edit-btn text-blue-600 hover:text-blue-800 text-sm mr-3">ç¼–è¾‘</button>
                    <button class="delete-btn text-red-600 hover:text-red-800 text-sm">åˆ é™¤</button>
                   </div>
                  </div>
                `;

                // æ’å…¥åˆ°æœ€åä¸€ä¸ªå­ä»»åŠ¡å‰é¢ï¼ˆè¿›åº¦æ¡å‰é¢ï¼‰
                const progressSection = groupItems.querySelector('.p-3.bg-blue-50/30');
                groupItems.insertBefore(newTask, progressSection);

                // æ›´æ–°ç»„è¿›åº¦
                updateGroupProgress(currentGroupId);
              }

              modal.classList.add('hidden');
              currentGroupId = null;
            }
            });
        });

        // æ›´æ–°ç»„è¿›åº¦
        function updateGroupProgress(groupId) {
          const groupHeader = document.querySelector(`.task-group-header[data-group-id="${groupId}"]`);
          if (groupHeader) {
            const groupItems = groupHeader.nextElementSibling;
            const tasks = groupItems.querySelectorAll('.task-checkbox');
            const completedTasks = groupItems.querySelectorAll('.task-checkbox:checked');
            const progressBar = groupItems.querySelector('.bg-green-500');
            const progressText = groupItems.querySelector('.text-gray-600');

            if (tasks.length > 0 && progressBar && progressText) {
              const percentage = Math.round((completedTasks.length / tasks.length) * 100);
              progressBar.style.width = `${percentage}%`;
              progressText.textContent = `ğŸ“Š ç»„è¿›åº¦ï¼š${completedTasks.length}/${tasks.length} å®Œæˆ`;
            }
          }
        }
  </script>
  <!-- [/JSMOD] f6g_æ·»åŠ å­ä»»åŠ¡åŠŸèƒ½ -- å¤„ç†å‘ä»»åŠ¡ç»„æ·»åŠ æ–°å­ä»»åŠ¡çš„é€»è¾‘ -->
  <!-- [MODULE] g7h_åˆ é™¤ä»»åŠ¡ç»„ç¡®è®¤æ¡† -->
  <div
    id="deleteGroupModal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
  >
    <div class="bg-white rounded-xl p-6 w-5/6 max-w-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-2">ç¡®è®¤åˆ é™¤</h3>
      <p class="text-gray-600 mb-6" id="deleteGroupMessage">
        ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡ç»„å—ï¼Ÿ
      </p>
      <div class="flex justify-end space-x-3">
        <button
          id="cancelDeleteGroup"
          class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
        >
          å–æ¶ˆ
        </button>
        <button
          id="confirmDeleteGroup"
          class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
        >
          åˆ é™¤
        </button>
      </div>
    </div>
  </div>
  <!-- [/MODULE] g7h_åˆ é™¤ä»»åŠ¡ç»„ç¡®è®¤æ¡† -- ç”¨äºç¡®è®¤åˆ é™¤æ•´ä¸ªä»»åŠ¡ç»„ -->
  <!-- [JSMOD] h8i_åˆ é™¤ä»»åŠ¡ç»„åŠŸèƒ½ -->
  <script id="deleteGroup">
    document.addEventListener('DOMContentLoaded', () => {
          let currentGroupId = null;
          const modal = document.getElementById('deleteGroupModal');
          const messageEl = document.getElementById('deleteGroupMessage');
          const cancelBtn = document.getElementById('cancelDeleteGroup');
          const confirmBtn = document.getElementById('confirmDeleteGroup');

          // ç‚¹å‡»åˆ é™¤ä»»åŠ¡ç»„æŒ‰é’®
          document.querySelectorAll('.group-action-btn[data-action="delete"]').forEach(btn => {
            btn.addEventListener('click', (e) => {
              e.stopPropagation();
              const groupHeader = btn.closest('.task-group-header');
              currentGroupId = groupHeader.dataset.groupId;
              const groupName = groupHeader.querySelector('.font-medium').textContent.trim();
              const groupItems = groupHeader.nextElementSibling;
              const taskCount = groupItems.querySelectorAll('.task-checkbox').length;

              // æ›´æ–°ç¡®è®¤æ¶ˆæ¯
              messageEl.textContent = `ç¡®å®šè¦åˆ é™¤"${groupName}"ä»»åŠ¡ç»„å—ï¼ŸåŒ…å«${taskCount}ä¸ªå­ä»»åŠ¡`;

              modal.classList.remove('hidden');

              // éšè—èœå•
              btn.closest('.group-menu').classList.add('hidden');
            });
          });

          // å–æ¶ˆåˆ é™¤
          cancelBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            currentGroupId = null;
          });

          // ç¡®è®¤åˆ é™¤
          confirmBtn.addEventListener('click', () => {
            if (currentGroupId) {
              const groupCard = document.querySelector(`.task-group-header[data-group-id="${currentGroupId}"]`).closest('.task-card');
              if (groupCard) {
                groupCard.remove();
              }
            }

            modal.classList.add('hidden');
            currentGroupId = null;
          });
        });
  </script>
  <!-- [/JSMOD] h8i_åˆ é™¤ä»»åŠ¡ç»„åŠŸèƒ½ -- å¤„ç†åˆ é™¤æ•´ä¸ªä»»åŠ¡ç»„çš„é€»è¾‘ -->
  <!-- [MODULE] i9j_æŸ¥çœ‹ç»Ÿè®¡å¼¹çª— -->
  <div
    id="groupStatsModal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
  >
    <div class="bg-white rounded-xl p-6 w-5/6 max-w-sm">
      <h3 class="text-lg font-semibold text-gray-800 mb-4" id="statsGroupName">
        ä»»åŠ¡ç»„ç»Ÿè®¡
      </h3>
      <div class="space-y-4">
        <div class="flex justify-between items-center">
          <span class="text-gray-600"> æ€»ä»»åŠ¡æ•° </span>
          <span class="font-medium" id="statsTotalTasks"> 0 </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600"> å·²å®Œæˆä»»åŠ¡ </span>
          <span class="font-medium text-green-600" id="statsCompletedTasks">
            0
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600"> å¾…å®Œæˆä»»åŠ¡ </span>
          <span class="font-medium text-yellow-600" id="statsPendingTasks">
            0
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600"> å®Œæˆç‡ </span>
          <span class="font-medium" id="statsCompletionRate"> 0% </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600"> é¢„è®¡æ€»è€—æ—¶ </span>
          <span class="font-medium" id="statsTotalTime"> 0åˆ†é’Ÿ </span>
        </div>
      </div>
      <div class="mt-6 flex justify-center">
        <button
          id="closeStatsModal"
          class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90"
        >
          å…³é—­
        </button>
      </div>
    </div>
  </div>
  <!-- [/MODULE] i9j_æŸ¥çœ‹ç»Ÿè®¡å¼¹çª— -- æ˜¾ç¤ºä»»åŠ¡ç»„çš„è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ -->
  <!-- [JSMOD] j0k_æŸ¥çœ‹ç»Ÿè®¡åŠŸèƒ½ -->
  <script id="groupStats">
    document.addEventListener('DOMContentLoaded', () => {
          let currentGroupId = null;
          const modal = document.getElementById('groupStatsModal');
          const groupNameEl = document.getElementById('statsGroupName');
          const totalTasksEl = document.getElementById('statsTotalTasks');
          const completedTasksEl = document.getElementById('statsCompletedTasks');
          const pendingTasksEl = document.getElementById('statsPendingTasks');
          const completionRateEl = document.getElementById('statsCompletionRate');
          const totalTimeEl = document.getElementById('statsTotalTime');
          const closeBtn = document.getElementById('closeStatsModal');

          // ç‚¹å‡»æŸ¥çœ‹ç»Ÿè®¡æŒ‰é’®
          document.querySelectorAll('.group-action-btn[data-action="stats"]').forEach(btn => {
            btn.addEventListener('click', (e) => {
              e.stopPropagation();
              const groupHeader = btn.closest('.task-group-header');
              currentGroupId = groupHeader.dataset.groupId;
              const groupName = groupHeader.querySelector('.font-medium').textContent.trim();
              const groupItems = groupHeader.nextElementSibling;

              // è®¡ç®—ç»Ÿè®¡æ•°æ®
              const tasks = groupItems.querySelectorAll('.task-checkbox');
              const completedTasks = groupItems.querySelectorAll('.task-checkbox:checked');
              const totalTasks = tasks.length;
              const completedCount = completedTasks.length;
              const pendingCount = totalTasks - completedCount;
              const completionRate = totalTasks > 0 ? Math.round((completedCount / totalTasks) * 100) : 0;

              // è®¡ç®—æ€»æ—¶é—´
              let totalMinutes = 0;
              groupItems.querySelectorAll('.bg-yellow-100.text-yellow-800').forEach(el => {
                const text = el.textContent.trim();
                const minutes = parseInt(text);
                if (!isNaN(minutes)) {
                  totalMinutes += minutes;
                }
              });

              // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
              groupNameEl.textContent = `${groupName} ç»Ÿè®¡`;
              totalTasksEl.textContent = totalTasks;
              completedTasksEl.textContent = completedCount;
              pendingTasksEl.textContent = pendingCount;
              completionRateEl.textContent = `${completionRate}%`;
              totalTimeEl.textContent = `${totalMinutes}åˆ†é’Ÿ`;

              modal.classList.remove('hidden');

              // éšè—èœå•
              btn.closest('.group-menu').classList.add('hidden');
            });
          });

          // å…³é—­ç»Ÿè®¡å¼¹çª—
          closeBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            currentGroupId = null;
          });
        });
  </script>
  <!-- [/JSMOD] j0k_æŸ¥çœ‹ç»Ÿè®¡åŠŸèƒ½ -- å¤„ç†ä»»åŠ¡ç»„ç»Ÿè®¡ä¿¡æ¯çš„è®¡ç®—å’Œæ˜¾ç¤º -->
</html>
