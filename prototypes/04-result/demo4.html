<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>TaskAI - AIæ‹†åˆ†ç»“æœ</title>
    <script src="https://res.gemcoder.com/js/reload.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
                  theme: {
                      extend: {
                          colors: {
                              primary: '#667eea',
                              secondary: '#764ba2',
                              task: '#fff3cd',
                              high: '#ef4444',
                              medium: '#f59e0b',
                              low: '#10b981'
                          },
                          spacing: {
                              '160': '40rem',
                          },
                          boxShadow: {
                              'button': '0 10px 25px -5px rgba(102, 126, 234, 0.4)',
                              'task-card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)'
                          }
                      }
                  }
              }
    </script>
    <style type="text/tailwindcss">
      @layer utilities {
          .content-auto {
              content-visibility: auto;
          }
          .bg-gradient-primary {
              background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          }
          .text-shadow {
              text-shadow: 0 2px 4px rgba(0,0,0,0.1);
          }
          .task-card {
              @apply bg-white rounded-xl p-5 shadow-task-card border border-gray-100 mb-4 transition-all duration-200 hover:shadow-lg;
          }
          .btn-primary {
              @apply bg-gradient-primary text-white py-3 px-6 rounded-xl font-medium shadow-button transition-transform duration-200 active:scale-95;
          }
          .btn-secondary {
              @apply bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium transition-all duration-200 hover:bg-gray-200 active:scale-95;
          }
      }
    </style>
  </head>
  <body class="bg-white min-h-screen flex flex-col">
    <!-- [MODULE] abc_ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="flex flex-col h-screen">
      <!-- [MODULE] d23_é¡¶éƒ¨å¯¼èˆªæ  -->
      <header
        class="h-16 flex items-center justify-center px-6 border-b border-gray-100"
      >
        <!-- [MODULE] 33f_é¡¶éƒ¨å¯¼èˆªæ :é¡µé¢æ ‡é¢˜ -->
        <div class="flex items-center">
          <span class="text-xl font-bold text-gray-800"> âœ… AIæ‹†åˆ†å®Œæˆ </span>
        </div>
        <!-- [/MODULE] 33f_é¡¶éƒ¨å¯¼èˆªæ :é¡µé¢æ ‡é¢˜ -- æ˜¾ç¤ºå½“å‰é¡µé¢æ ‡é¢˜"AIæ‹†åˆ†å®Œæˆ" -->
      </header>
      <!-- [/MODULE] d23_é¡¶éƒ¨å¯¼èˆªæ  -- åŒ…å«é¡µé¢æ ‡é¢˜ -->
      <!-- [MODULE] e7h_ä¸­é—´å†…å®¹åŒºåŸŸ -->
      <main class="flex-grow overflow-y-auto px-6 py-5">
        <!-- [MODULE] f8j_ä¸­é—´å†…å®¹åŒºåŸŸ:åŸæ–‡è¯†åˆ«ç»“æœ -->
        <div class="bg-gray-50 rounded-xl p-4 mb-8">
          <div class="text-sm text-gray-500 mb-2">åŸæ–‡è¯†åˆ«ç»“æœ</div>
          <div class="text-gray-800 font-medium">
            ä»Šå¤©ä¸‹åˆä¸‰ç‚¹è¦å¼€ä¼šï¼Œéœ€è¦å‡†å¤‡PPTå’Œæ•°æ®æŠ¥å‘Šï¼Œå¦å¤–æ™šä¸Šè¦ä¹°èœåšæ™šé¥­
          </div>
        </div>
        <!-- [/MODULE] f8j_ä¸­é—´å†…å®¹åŒºåŸŸ:åŸæ–‡è¯†åˆ«ç»“æœ -- æ˜¾ç¤ºç”¨æˆ·è¯­éŸ³è¯†åˆ«åçš„åŸå§‹æ–‡æœ¬å†…å®¹ -->
        <!-- [MODULE] g9k_ä¸­é—´å†…å®¹åŒºåŸŸ:AIæ‹†åˆ†ç»“æœ -->
        <div class="mb-8">
          <div class="flex items-center justify-between mb-4">
            <div class="text-lg font-medium text-gray-800">
              ğŸ“ æ‹†åˆ†å‡º 4 ä¸ªä»»åŠ¡ï¼š
            </div>
            <div class="text-sm text-gray-500">å¯ç‚¹å‡»ä»»åŠ¡è¿›è¡Œç¼–è¾‘</div>
          </div>
          <!-- [MODULE] h0l_ä¸­é—´å†…å®¹åŒºåŸŸ:ä»»åŠ¡åˆ—è¡¨ -->
          <div class="space-y-5">
            <!-- æ“ä½œèœå• -->
            <div
              id="task-action-menu"
              class="hidden absolute bg-white rounded-xl shadow-lg p-2 z-50 w-36"
            >
              <button
                class="action-btn edit-btn w-full text-left px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 flex items-center"
              >
                <i class="fas fa-edit text-gray-600 mr-2"> </i>
                <span class="text-sm text-gray-700"> ç¼–è¾‘ </span>
              </button>
              <button
                class="action-btn delete-btn w-full text-left px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 flex items-center"
              >
                <i class="fas fa-trash-alt text-red-500 mr-2"> </i>
                <span class="text-sm text-gray-700"> åˆ é™¤ </span>
              </button>
              <button
                class="action-btn complete-btn w-full text-left px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 flex items-center"
              >
                <i class="fas fa-check text-green-500 mr-2"> </i>
                <span class="text-sm text-gray-700"> å®Œæˆ </span>
              </button>
            </div>
            <!-- [MODULE] u3o_ä¸­é—´å†…å®¹åŒºåŸŸ:ä»»åŠ¡ç»„1 -->
            <div class="bg-blue-50 rounded-2xl p-5 mb-4">
              <div
                class="task-group-header flex justify-between items-center cursor-pointer mb-3"
                data-group-id="1"
              >
                <div class="font-medium text-gray-800 flex items-center">
                  <i
                    class="fas fa-chevron-down group-toggle mr-2 text-gray-500 transition-transform duration-200"
                  >
                  </i>
                  <i class="fas fa-list-check mr-2 text-blue-500"> </i>
                  ä¼šè®®å‡†å¤‡
                </div>
                <button
                  class="task-options-btn text-gray-400 hover:text-gray-800 p-1.5 rounded-full hover:bg-gray-100 transition-colors duration-200"
                  data-group-id="1"
                  data-type="group"
                >
                  <i class="fas fa-ellipsis-v"> </i>
                </button>
              </div>
              <div class="group-tasks space-y-3 pl-6">
                <!-- å­ä»»åŠ¡1 -->
                <div class="task-card bg-blue-50/50 border-blue-100">
                  <div class="flex justify-between items-start">
                    <div class="flex items-start">
                      <div
                        class="task-checkbox bg-white border border-gray-300 rounded-full p-1.5 mr-3 mt-0.5 cursor-pointer"
                        data-task-id="1-1"
                      >
                        <i class="fas fa-check text-green-500 text-sm hidden">
                        </i>
                      </div>
                      <div>
                        <div class="font-medium text-gray-800">
                          1. é¢„å®šä¼šè®®å®¤
                        </div>
                        <div class="text-sm text-gray-500 mt-1">
                          é¢„è®¡æ—¶é—´ï¼š15åˆ†é’Ÿ
                        </div>
                        <div class="flex items-center mt-1">
                          <span
                            class="text-xs bg-red-100 text-red-500 px-2 py-0.5 rounded-full"
                          >
                            ä¼˜å…ˆçº§ï¼šé«˜
                          </span>
                        </div>
                      </div>
                    </div>
                    <button
                      class="task-options-btn text-gray-400 hover:text-gray-800 p-1.5 rounded-full hover:bg-gray-100 transition-colors duration-200"
                      data-task-id="1-1"
                      data-type="task"
                    >
                      <i class="fas fa-ellipsis-v"> </i>
                    </button>
                  </div>
                </div>
                <!-- å­ä»»åŠ¡2 -->
                <div class="task-card bg-blue-50/50 border-blue-100">
                  <div class="flex justify-between items-start">
                    <div class="flex items-start">
                      <div
                        class="task-checkbox bg-white border border-gray-300 rounded-full p-1.5 mr-3 mt-0.5 cursor-pointer"
                        data-task-id="1-2"
                      >
                        <i class="fas fa-check text-green-500 text-sm hidden">
                        </i>
                      </div>
                      <div>
                        <div class="font-medium text-gray-800">2. å‡†å¤‡PPT</div>
                        <div class="text-sm text-gray-500 mt-1">
                          é¢„è®¡æ—¶é—´ï¼š30åˆ†é’Ÿ
                        </div>
                        <div class="flex items-center mt-1">
                          <span
                            class="text-xs bg-red-100 text-red-500 px-2 py-0.5 rounded-full"
                          >
                            ä¼˜å…ˆçº§ï¼šé«˜
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="flex space-x-2">
                      <button
                        class="edit-task text-gray-400 hover:text-primary text-sm"
                        data-task-id="1-2"
                      >
                        <i class="fas fa-edit mr-1"> </i>
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-task text-gray-400 hover:text-red-500 text-sm"
                        data-task-id="1-2"
                      >
                        <i class="fas fa-trash-alt mr-1"> </i>
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
                <!-- å­ä»»åŠ¡3 -->
                <div class="task-card bg-blue-50/50 border-blue-100">
                  <div class="flex justify-between items-start">
                    <div class="flex items-start">
                      <div
                        class="task-checkbox bg-white border border-gray-300 rounded-full p-1.5 mr-3 mt-0.5 cursor-pointer"
                        data-task-id="1-3"
                      >
                        <i class="fas fa-check text-green-500 text-sm hidden">
                        </i>
                      </div>
                      <div>
                        <div class="font-medium text-gray-800">
                          3. æ•´ç†æ•°æ®æŠ¥å‘Š
                        </div>
                        <div class="text-sm text-gray-500 mt-1">
                          é¢„è®¡æ—¶é—´ï¼š20åˆ†é’Ÿ
                        </div>
                        <div class="flex items-center mt-1">
                          <span
                            class="text-xs bg-yellow-100 text-yellow-500 px-2 py-0.5 rounded-full"
                          >
                            ä¼˜å…ˆçº§ï¼šä¸­
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="flex space-x-2">
                      <button
                        class="edit-task text-gray-400 hover:text-primary text-sm"
                        data-task-id="1-3"
                      >
                        <i class="fas fa-edit mr-1"> </i>
                        ç¼–è¾‘
                      </button>
                      <button
                        class="delete-task text-gray-400 hover:text-red-500 text-sm"
                        data-task-id="1-3"
                      >
                        <i class="fas fa-trash-alt mr-1"> </i>
                        åˆ é™¤
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- [/MODULE] u3o_ä¸­é—´å†…å®¹åŒºåŸŸ:ä»»åŠ¡ç»„1 -- ä¼šè®®å‡†å¤‡ä»»åŠ¡ç»„ï¼ŒåŒ…å«3ä¸ªå­ä»»åŠ¡å’Œç»„è¿›åº¦æ˜¾ç¤º -->
            <!-- [MODULE] v4p_ä¸­é—´å†…å®¹åŒºåŸŸ:ä»»åŠ¡ç»„2 -->
            <div class="bg-blue-50 rounded-2xl p-5 mb-4">
              <div
                class="task-group-header flex justify-between items-center cursor-pointer mb-3"
                data-group-id="2"
              >
                <div class="font-medium text-gray-800 flex items-center">
                  <i
                    class="fas fa-chevron-down group-toggle mr-2 text-gray-500 transition-transform duration-200"
                  >
                  </i>
                  <i class="fas fa-shopping-basket mr-2 text-blue-500"> </i>
                  ç”Ÿæ´»é‡‡è´­
                </div>
                <button
                  class="task-options-btn text-gray-400 hover:text-gray-800 p-1.5 rounded-full hover:bg-gray-100 transition-colors duration-200"
                  data-group-id="2"
                  data-type="group"
                >
                  <i class="fas fa-ellipsis-v"> </i>
                </button>
              </div>
              <div class="group-tasks space-y-3 pl-6">
                <!-- å­ä»»åŠ¡ -->
                <div class="task-card bg-blue-50/50 border-blue-100">
                  <div class="flex justify-between items-start">
                    <div class="flex items-start">
                      <div
                        class="task-checkbox bg-white border border-gray-300 rounded-full p-1.5 mr-3 mt-0.5 cursor-pointer"
                        data-task-id="2-1"
                      >
                        <i class="fas fa-check text-green-500 text-sm hidden">
                        </i>
                      </div>
                      <div>
                        <div class="font-medium text-gray-800">
                          1. ä¹°èœåšæ™šé¥­
                        </div>
                        <div class="text-sm text-gray-500 mt-1">
                          é¢„è®¡æ—¶é—´ï¼š45åˆ†é’Ÿ
                        </div>
                        <div class="flex items-center mt-1">
                          <span
                            class="text-xs bg-yellow-100 text-yellow-500 px-2 py-0.5 rounded-full"
                          >
                            ä¼˜å…ˆçº§ï¼šä¸­
                          </span>
                        </div>
                      </div>
                    </div>
                    <button
                      class="task-options-btn text-gray-400 hover:text-gray-800 p-1.5 rounded-full hover:bg-gray-100 transition-colors duration-200"
                      data-task-id="2-1"
                      data-type="task"
                    >
                      <i class="fas fa-ellipsis-v"> </i>
                    </button>
                  </div>
                </div>
                <!-- ç»„è¿›åº¦ -->
                <div class="mt-4 pt-3 border-t border-blue-100">
                  <div class="flex justify-between items-center mb-1">
                    <div class="text-sm text-gray-600">
                      ğŸ“Š ç»„è¿›åº¦ï¼š
                      <span class="group-progress-text"> 0/1 å®Œæˆ </span>
                    </div>
                  </div>
                  <div class="w-full bg-blue-100 rounded-full h-2">
                    <div
                      class="group-progress-bar bg-blue-500 h-2 rounded-full"
                      style="width: 0%"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <!-- [/MODULE] v4p_ä¸­é—´å†…å®¹åŒºåŸŸ:ä»»åŠ¡ç»„2 -- ç”Ÿæ´»é‡‡è´­ä»»åŠ¡ç»„ï¼ŒåŒ…å«1ä¸ªå­ä»»åŠ¡å’Œç»„è¿›åº¦æ˜¾ç¤º -->
            <!-- [MODULE] x6r_ä¸­é—´å†…å®¹åŒºåŸŸ:ç‹¬ç«‹ä»»åŠ¡1 -->
            <div class="task-card">
              <div class="flex justify-between items-start">
                <div class="flex items-start">
                  <div
                    class="task-checkbox bg-white border border-gray-300 rounded-full p-1.5 mr-3 mt-0.5 cursor-pointer"
                    data-task-id="independent-1"
                  >
                    <i class="fas fa-check text-green-500 text-sm hidden"> </i>
                  </div>
                  <div>
                    <div class="font-medium text-gray-800">ä¹°èœåšæ™šé¥­</div>
                    <div class="text-sm text-gray-500 mt-1">
                      é¢„è®¡æ—¶é—´ï¼š45åˆ†é’Ÿ
                    </div>
                    <div class="flex items-center mt-1">
                      <span
                        class="text-xs bg-yellow-100 text-yellow-500 px-2 py-0.5 rounded-full"
                      >
                        ä¼˜å…ˆçº§ï¼šä¸­
                      </span>
                    </div>
                  </div>
                </div>
                <button
                  class="task-options-btn text-gray-400 hover:text-gray-800 p-1.5 rounded-full hover:bg-gray-100 transition-colors duration-200"
                  data-task-id="independent-1"
                  data-type="independent"
                >
                  <i class="fas fa-ellipsis-v"> </i>
                </button>
              </div>
            </div>
            <!-- [/MODULE] x6r_ä¸­é—´å†…å®¹åŒºåŸŸ:ç‹¬ç«‹ä»»åŠ¡1 -- æ— åˆ†ç»„çš„ç‹¬ç«‹ä»»åŠ¡ -->
          </div>
          <!-- [/MODULE] h0l_ä¸­é—´å†…å®¹åŒºåŸŸ:ä»»åŠ¡åˆ—è¡¨ -- æ˜¾ç¤ºAIæ‹†åˆ†åçš„æ‰€æœ‰ä»»åŠ¡é¡¹ -->
        </div>
        <!-- [/MODULE] g9k_ä¸­é—´å†…å®¹åŒºåŸŸ:AIæ‹†åˆ†ç»“æœ -- æ˜¾ç¤ºAIæ‹†åˆ†çš„ä»»åŠ¡æ•°é‡å’Œå…·ä½“ä»»åŠ¡åˆ—è¡¨ -->
      </main>
      <!-- [/MODULE] e7h_ä¸­é—´å†…å®¹åŒºåŸŸ -- åŒ…å«åŸæ–‡è¯†åˆ«ç»“æœå’ŒAIæ‹†åˆ†çš„ä»»åŠ¡åˆ—è¡¨ -->
      <!-- [MODULE] p7s_åº•éƒ¨æ“ä½œåŒºåŸŸ -->
      <footer
        class="h-24 flex items-center justify-around px-6 border-t border-gray-100"
      >
        <!-- [MODULE] q8t_åº•éƒ¨æ“ä½œåŒºåŸŸ:é‡å½•æŒ‰é’® -->
        <button class="btn-secondary flex-1 mr-3" id="record-again-btn">
          <i class="fas fa-redo-alt mr-2"> </i>
          é‡å½•
        </button>
        <!-- [/MODULE] q8t_åº•éƒ¨æ“ä½œåŒºåŸŸ:é‡å½•æŒ‰é’® -- ç‚¹å‡»è¿”å›é‡æ–°å½•éŸ³ç•Œé¢ -->
        <!-- [MODULE] r9u_åº•éƒ¨æ“ä½œåŒºåŸŸ:ä¿å­˜æŒ‰é’® -->
        <button class="btn-primary flex-1 ml-3" id="save-tasks-btn">
          <i class="fas fa-save mr-2"> </i>
          ä¿å­˜
        </button>
        <!-- [/MODULE] r9u_åº•éƒ¨æ“ä½œåŒºåŸŸ:ä¿å­˜æŒ‰é’® -- ç‚¹å‡»ä¿å­˜æ‰€æœ‰ä»»åŠ¡åˆ°ä»»åŠ¡åˆ—è¡¨ -->
      </footer>
      <!-- [/MODULE] p7s_åº•éƒ¨æ“ä½œåŒºåŸŸ -- åŒ…å«é‡å½•å’Œä¿å­˜ä¸¤ä¸ªæ“ä½œæŒ‰é’® -->
    </div>
    <!-- [/MODULE] abc_ä¸»å†…å®¹åŒºåŸŸ -- TaskAIçš„AIæ‹†åˆ†ç»“æœç•Œé¢ï¼Œå±•ç¤ºAIæ‹†åˆ†åçš„ä»»åŠ¡åˆ—è¡¨åŠæ“ä½œæŒ‰é’® -->
    <!-- [MODULE] s0v_ä»»åŠ¡ç¼–è¾‘å¼¹çª— -->
    <div
      class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-6"
      id="task-edit-modal"
    >
      <div
        class="bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-y-auto"
      >
        <div class="p-5 border-b flex justify-between items-center">
          <h2 class="text-xl font-bold text-gray-800">ç¼–è¾‘ä»»åŠ¡</h2>
          <button
            class="text-gray-500 hover:text-gray-800"
            id="close-edit-modal"
          >
            <i class="fas fa-times text-lg"> </i>
          </button>
        </div>
        <div class="p-5">
          <input id="edit-task-id" type="hidden" />
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">
              ä»»åŠ¡å†…å®¹
            </label>
            <input
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
              id="task-content"
              type="text"
            />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">
              é¢„è®¡æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
            </label>
            <input
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
              id="task-time"
              type="number"
            />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">
              ä¼˜å…ˆçº§
            </label>
            <select
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
              id="task-priority"
            >
              <option value="high">é«˜</option>
              <option value="medium">ä¸­</option>
              <option value="low">ä½</option>
            </select>
          </div>
        </div>
        <div class="p-5 border-t">
          <button class="w-full btn-primary" id="save-task-edit">
            <i class="fas fa-check mr-2"> </i>
            ä¿å­˜ä¿®æ”¹
          </button>
        </div>
      </div>
    </div>
    <!-- [/MODULE] s0v_ä»»åŠ¡ç¼–è¾‘å¼¹çª— -- ç”¨äºç¼–è¾‘ä»»åŠ¡çš„å¼¹çª—ï¼ŒåŒ…å«ä»»åŠ¡å†…å®¹ã€é¢„è®¡æ—¶é—´å’Œä¼˜å…ˆçº§çš„ç¼–è¾‘é€‰é¡¹ -->
    <!-- [MODULE] t1w_ä»»åŠ¡ç»„ç¼–è¾‘èœå• -->
    <div class="fixed z-50 hidden" id="group-options-menu">
      <div
        class="bg-white rounded-xl shadow-lg w-48 overflow-hidden border border-gray-100"
      >
        <div class="py-2">
          <button
            class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 edit-group-option"
          >
            <i class="fas fa-edit mr-2 text-gray-500"> </i>
            ç¼–è¾‘ç»„
          </button>
          <button
            class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 delete-group-option"
          >
            <i class="fas fa-trash-alt mr-2 text-red-500"> </i>
            åˆ é™¤ç»„
          </button>
          <button
            class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 add-task-option"
          >
            <i class="fas fa-plus mr-2 text-green-500"> </i>
            æ·»åŠ å­ä»»åŠ¡
          </button>
        </div>
      </div>
    </div>
    <!-- [/MODULE] t1w_ä»»åŠ¡ç»„ç¼–è¾‘èœå• -- ä»»åŠ¡ç»„æ“ä½œèœå•ï¼ŒåŒ…å«ç¼–è¾‘ç»„ã€åˆ é™¤ç»„å’Œæ·»åŠ å­ä»»åŠ¡é€‰é¡¹ -->
    <!-- [MODULE] u2x_åˆ é™¤ç¡®è®¤å¼¹çª— -->
    <div
      class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-6"
      id="delete-confirm-modal"
    >
      <div class="bg-white rounded-2xl w-full max-w-md p-6">
        <div class="text-center mb-4">
          <div
            class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 text-red-500 mb-4"
          >
            <i class="fas fa-trash-alt text-2xl"> </i>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">ç¡®è®¤åˆ é™¤ï¼Ÿ</h3>
          <p class="text-gray-500" id="delete-confirm-message">
            ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚
          </p>
        </div>
        <div class="flex space-x-3">
          <button class="flex-1 btn-secondary" id="cancel-delete">å–æ¶ˆ</button>
          <button
            class="flex-1 bg-red-500 text-white py-3 px-6 rounded-xl font-medium transition-transform duration-200 active:scale-95"
            id="confirm-delete"
          >
            ç¡®è®¤åˆ é™¤
          </button>
        </div>
      </div>
    </div>
    <!-- [/MODULE] u2x_åˆ é™¤ç¡®è®¤å¼¹çª— -- ç”¨äºç¡®è®¤åˆ é™¤æ“ä½œçš„å¼¹çª— -->
    <!-- [JSMOD] y7s_ä»»åŠ¡ç»„äº¤äº’åŠŸèƒ½ -->
    <script id="task-group-interactions">
      document.addEventListener('DOMContentLoaded', () => {
            // ä»»åŠ¡ç»„å±•å¼€/æ”¶èµ·
            document.querySelectorAll('.task-group-header').forEach(header => {
              header.addEventListener('click', function() {
                const groupId = this.getAttribute('data-group-id');
                const tasksContainer = this.nextElementSibling;
                const toggleIcon = this.querySelector('.group-toggle');

                tasksContainer.classList.toggle('hidden');
                toggleIcon.classList.toggle('fa-chevron-down');
                toggleIcon.classList.toggle('fa-chevron-right');
              });
            });

            // ä»»åŠ¡å‹¾é€‰
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
              checkbox.addEventListener('click', function() {
                const taskId = this.getAttribute('data-task-id');
                const checkIcon = this.querySelector('i');
                const isChecked = !checkIcon.classList.contains('hidden');

                // åˆ‡æ¢å‹¾é€‰çŠ¶æ€
                checkIcon.classList.toggle('hidden', isChecked);
                this.classList.toggle('bg-green-100', !isChecked);
                this.classList.toggle('border-green-500', !isChecked);

                // æ›´æ–°ç»„è¿›åº¦
                updateGroupProgress(this.closest('.bg-blue-50'));
              });
            });

            // æ›´æ–°ç»„è¿›åº¦
            function updateGroupProgress(groupElement) {
              if (!groupElement) return;

              const totalTasks = groupElement.querySelectorAll('.task-checkbox').length;
              const completedTasks = groupElement.querySelectorAll('.task-checkbox i:not(.hidden)').length;
              const progressPercent = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;

              // æ›´æ–°è¿›åº¦æ–‡æœ¬å’Œè¿›åº¦æ¡
              groupElement.querySelector('.group-progress-text').textContent = `${completedTasks}/${totalTasks} å®Œæˆ`;
              groupElement.querySelector('.group-progress-bar').style.width = `${progressPercent}%`;
            }

            // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªä»»åŠ¡ç»„çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ä¸ºå·²å®ŒæˆçŠ¶æ€
            const firstTaskCheckbox = document.querySelector('[data-task-id="1-1"]');
            if (firstTaskCheckbox) {
              const checkIcon = firstTaskCheckbox.querySelector('i');
              checkIcon.classList.remove('hidden');
              firstTaskCheckbox.classList.add('bg-green-100', 'border-green-500');
              updateGroupProgress(firstTaskCheckbox.closest('.bg-blue-50'));
            }
          });
    </script>
    <!-- [/JSMOD] y7s_ä»»åŠ¡ç»„äº¤äº’åŠŸèƒ½ -->
    <!-- [JSMOD] t1w_ä»»åŠ¡ç¼–è¾‘åŠŸèƒ½ -->
    <script id="task-edit-script">
      document.addEventListener('DOMContentLoaded', () => {
                  // è·å–DOMå…ƒç´ 
                  const taskEditModal = document.getElementById('task-edit-modal');
                  const closeEditModal = document.getElementById('close-edit-modal');
                  const saveTaskEdit = document.getElementById('save-task-edit');
                  const editTaskIdInput = document.getElementById('edit-task-id');
                  const taskContentInput = document.getElementById('task-content');
                  const taskTimeInput = document.getElementById('task-time');
                  const taskPrioritySelect = document.getElementById('task-priority');
                  const editButtons = document.querySelectorAll('.edit-task');
                  const deleteButtons = document.querySelectorAll('.delete-task');
                  const saveTasksBtn = document.getElementById('save-tasks-btn');
                  const recordAgainBtn = document.getElementById('record-again-btn');

                  // æ‰“å¼€ä»»åŠ¡ç¼–è¾‘å¼¹çª—
                  editButtons.forEach(button => {
                      button.addEventListener('click', () => {
                          const taskId = button.getAttribute('data-task-id');
                          const taskElement = button.closest('.task-card');
                          const taskTitle = taskElement.querySelector('.font-medium').textContent.split('. ')[1];
                          const taskTime = taskElement.querySelector('.text-sm.text-gray-500').textContent.split('ï¼š')[1].replace('åˆ†é’Ÿ', '');
                          let taskPriority = 'medium';

                          if (taskElement.querySelector('.bg-red-100')) {
                              taskPriority = 'high';
                          } else if (taskElement.querySelector('.bg-green-100')) {
                              taskPriority = 'low';
                          }

                          // å¡«å……è¡¨å•æ•°æ®
                          editTaskIdInput.value = taskId;
                          taskContentInput.value = taskTitle;
                          taskTimeInput.value = taskTime;
                          taskPrioritySelect.value = taskPriority;

                          // æ˜¾ç¤ºå¼¹çª—
                          taskEditModal.classList.remove('hidden');
                          taskEditModal.classList.add('flex');
                          document.body.style.overflow = 'hidden';
                      });
                  });

                  // å…³é—­ä»»åŠ¡ç¼–è¾‘å¼¹çª—
                  closeEditModal.addEventListener('click', () => {
                      taskEditModal.classList.add('hidden');
                      taskEditModal.classList.remove('flex');
                      document.body.style.overflow = '';
                  });

                  // ç‚¹å‡»å¼¹çª—èƒŒæ™¯å…³é—­
                  taskEditModal.addEventListener('click', (e) => {
                      if (e.target === taskEditModal) {
                          taskEditModal.classList.add('hidden');
                          taskEditModal.classList.remove('flex');
                          document.body.style.overflow = '';
                      }
                  });

                  // ä¿å­˜ä»»åŠ¡ç¼–è¾‘
                  saveTaskEdit.addEventListener('click', () => {
                      const taskId = editTaskIdInput.value;
                      const newContent = taskContentInput.value;
                      const newTime = taskTimeInput.value;
                      const newPriority = taskPrioritySelect.value;

                      // æ›´æ–°ä»»åŠ¡å¡ç‰‡å†…å®¹
                      const taskElements = document.querySelectorAll('.task-card');
                      taskElements.forEach((taskElement, index) => {
                          if (index + 1 === parseInt(taskId)) {
                              // æ›´æ–°ä»»åŠ¡æ ‡é¢˜
                              const titleElement = taskElement.querySelector('.font-medium');
                              titleElement.textContent = `${taskId}. ${newContent}`;

                              // æ›´æ–°ä»»åŠ¡æ—¶é—´
                              const timeElement = taskElement.querySelector('.text-sm.text-gray-500');
                              timeElement.textContent = `é¢„è®¡æ—¶é—´ï¼š${newTime}åˆ†é’Ÿ`;

                              // æ›´æ–°ä¼˜å…ˆçº§æ ‡ç­¾
                              const priorityElement = taskElement.querySelector('.flex.items-center span');
                              let priorityClass = '';
                              let priorityText = '';

                              if (newPriority === 'high') {
                                  priorityClass = 'bg-red-100 text-red-500';
                                  priorityText = 'ä¼˜å…ˆçº§ï¼šé«˜';
                              } else if (newPriority === 'medium') {
                                  priorityClass = 'bg-yellow-100 text-yellow-500';
                                  priorityText = 'ä¼˜å…ˆçº§ï¼šä¸­';
                              } else {
                                  priorityClass = 'bg-green-100 text-green-500';
                                  priorityText = 'ä¼˜å…ˆçº§ï¼šä½';
                              }

                              priorityElement.className = `text-xs ${priorityClass} px-2 py-0.5 rounded-full`;
                              priorityElement.textContent = priorityText;
                          }
                      });

                      // å…³é—­å¼¹çª—
                      taskEditModal.classList.add('hidden');
                      taskEditModal.classList.remove('flex');
                      document.body.style.overflow = '';

                      // æ˜¾ç¤ºæˆåŠŸæç¤º
                      showNotification('ä»»åŠ¡å·²æ›´æ–°');
                  });

                  // åˆ é™¤ä»»åŠ¡
                  deleteButtons.forEach(button => {
                      button.addEventListener('click', () => {
                          const taskElement = button.closest('.task-card');
                          taskElement.classList.add('opacity-0', 'transform', 'translate-x-full');
                          taskElement.style.transition = 'all 0.3s ease-out';

                          setTimeout(() => {
                              taskElement.remove();
                              showNotification('ä»»åŠ¡å·²åˆ é™¤');
                          }, 300);
                      });
                  });

                  // ä¿å­˜ä»»åŠ¡
                  saveTasksBtn.addEventListener('click', () => {
                      // æ¨¡æ‹Ÿä¿å­˜æ“ä½œ
                      saveTasksBtn.disabled = true;
                      saveTasksBtn.innerHTML = `





      <i class="fas fa-spinner fa-spin mr-2">
      </i>ä¿å­˜ä¸­...





      `;

                      setTimeout(() => {
                          saveTasksBtn.disabled = false;
                          saveTasksBtn.innerHTML = `





      <i class="fas fa-save mr-2">
      </i>ä¿å­˜





      `;
                          showNotification('æ‰€æœ‰ä»»åŠ¡å·²ä¿å­˜');

                          // æ¨¡æ‹Ÿè·³è½¬åˆ°ä»»åŠ¡åˆ—è¡¨é¡µé¢
                          setTimeout(() => {
                              window.location.href = 'javascript:void(0);'; // åœ¨å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè·³è½¬åˆ°ä»»åŠ¡åˆ—è¡¨é¡µ
                          }, 1500);
                      }, 1000);
                  });

                  // é‡æ–°å½•éŸ³
                  recordAgainBtn.addEventListener('click', () => {
                      // æ¨¡æ‹Ÿè·³è½¬åˆ°å½•éŸ³é¡µé¢
                      window.location.href = 'javascript:void(0);'; // åœ¨å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè·³è½¬åˆ°å½•éŸ³é¡µé¢
                  });

                  // æ˜¾ç¤ºé€šçŸ¥æç¤º
                  function showNotification(message) {
                      // åˆ›å»ºé€šçŸ¥å…ƒç´ 
                      const notification = document.createElement('div');
                      notification.className = 'fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300 opacity-0 translate-y-4';
                      notification.textContent = message;

                      // æ·»åŠ åˆ°é¡µé¢
                      document.body.appendChild(notification);

                      // æ˜¾ç¤ºé€šçŸ¥
                      setTimeout(() => {
                          notification.classList.remove('opacity-0', 'translate-y-4');
                      }, 10);

                      // 3ç§’åç§»é™¤
                      setTimeout(() => {
                          notification.classList.add('opacity-0', 'translate-y-4');
                          setTimeout(() => {
                              document.body.removeChild(notification);
                          }, 300);
                      }, 3000);
                  }
              });
    </script>
    <!-- [/JSMOD] t1w_ä»»åŠ¡ç¼–è¾‘åŠŸèƒ½ -- å®ç°ä»»åŠ¡çš„ç¼–è¾‘ã€åˆ é™¤å’Œä¿å­˜åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»»åŠ¡ç¼–è¾‘å¼¹çª—çš„æ˜¾ç¤ºä¸éšè—ï¼Œä»»åŠ¡æ•°æ®çš„ä¿®æ”¹å’Œä¿å­˜ï¼Œä»¥åŠæ“ä½œåé¦ˆé€šçŸ¥ -->
  </body>
</html>
<!-- [JSMOD] a1b_ä»»åŠ¡ç»„æ“ä½œé€»è¾‘ -->
<script id="group-operations-script">
  document.addEventListener('DOMContentLoaded', () => {
    // ä»»åŠ¡ç»„é€‰é¡¹èœå•åŠŸèƒ½
    const groupOptionsMenu = document.getElementById('group-options-menu');
    const groupOptionsBtns = document.querySelectorAll('.group-options-btn');
    let currentGroupId = null;

    // æ˜¾ç¤ºä»»åŠ¡ç»„é€‰é¡¹èœå•
    groupOptionsBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        currentGroupId = btn.getAttribute('data-group-id');

        // è·å–æŒ‰é’®ä½ç½®å¹¶æ˜¾ç¤ºèœå•
        const rect = btn.getBoundingClientRect();
        groupOptionsMenu.style.top = `${rect.bottom + window.scrollY}px`;
        groupOptionsMenu.style.left = `${rect.left + window.scrollX - 140}px`;
        groupOptionsMenu.classList.remove('hidden');

        // å­˜å‚¨å½“å‰ç‚¹å‡»çš„ç»„IDåˆ°èœå•
        groupOptionsMenu.setAttribute('data-current-group', currentGroupId);
      });
    });

    // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
    document.addEventListener('click', () => {
      groupOptionsMenu.classList.add('hidden');
    });

    // é˜»æ­¢èœå•å†…éƒ¨ç‚¹å‡»äº‹ä»¶å†’æ³¡
    groupOptionsMenu.addEventListener('click', (e) => {
      e.stopPropagation();
    });

    // ä»»åŠ¡ç»„ç¼–è¾‘åŠŸèƒ½
    document.querySelector('.edit-group-option').addEventListener('click', () => {
      const groupId = groupOptionsMenu.getAttribute('data-current-group');
      const groupHeader = document.querySelector(`.task-group-header[data-group-id="${groupId}"]`);
      const groupTitleElement = groupHeader.querySelector('div');
      const currentTitle = groupTitleElement.textContent.trim().replace(/^ä»»åŠ¡ç»„ \d+ï¼š/, '').trim();

      const newTitle = prompt('ç¼–è¾‘ä»»åŠ¡ç»„åç§°:', currentTitle);
      if (newTitle !== null && newTitle.trim() !== '') {
        // æ›´æ–°ç»„æ ‡é¢˜
        const iconElement = groupTitleElement.querySelector('i.fas');
        const titleTextNode = Array.from(groupTitleElement.childNodes).find(node =>
          node.nodeType === Node.TEXT_NODE && node.textContent.trim() !== ''
        );

        if (titleTextNode) {
          titleTextNode.textContent = ' ' + newTitle;
        }

        groupOptionsMenu.classList.add('hidden');
      }
    });

    // ä»»åŠ¡ç»„åˆ é™¤åŠŸèƒ½
    document.querySelector('.delete-group-option').addEventListener('click', () => {
      const groupId = groupOptionsMenu.getAttribute('data-current-group');
      const confirmModal = document.getElementById('delete-confirm-modal');
      const confirmMessage = document.getElementById('delete-confirm-message');
      const confirmBtn = document.getElementById('confirm-delete');
      const cancelBtn = document.getElementById('cancel-delete');

      // è®¾ç½®ç¡®è®¤æ¶ˆæ¯
      confirmMessage.textContent = 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡ç»„å—ï¼Ÿç»„å†…æ‰€æœ‰ä»»åŠ¡ä¹Ÿå°†è¢«åˆ é™¤ã€‚';

      // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
      confirmModal.classList.remove('hidden');
      confirmModal.classList.add('flex');

      // ç¡®è®¤åˆ é™¤å¤„ç†
      const handleConfirm = () => {
        const groupElement = document.querySelector(`[data-group-id="${groupId}"]`).closest('.bg-blue-50');
        if (groupElement) {
          groupElement.remove();
        }

        // å…³é—­èœå•å’Œå¼¹çª—
        groupOptionsMenu.classList.add('hidden');
        confirmModal.classList.add('hidden');
        confirmModal.classList.remove('flex');

        // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
        confirmBtn.removeEventListener('click', handleConfirm);
        cancelBtn.removeEventListener('click', handleCancel);
      };

      // å–æ¶ˆåˆ é™¤å¤„ç†
      const handleCancel = () => {
        groupOptionsMenu.classList.add('hidden');
        confirmModal.classList.add('hidden');
        confirmModal.classList.remove('flex');

        // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
        confirmBtn.removeEventListener('click', handleConfirm);
        cancelBtn.removeEventListener('click', handleCancel);
      };

      confirmBtn.addEventListener('click', handleConfirm);
      cancelBtn.addEventListener('click', handleCancel);

      groupOptionsMenu.classList.add('hidden');
    });

    // æ·»åŠ å­ä»»åŠ¡åŠŸèƒ½
    document.querySelector('.add-task-option').addEventListener('click', () => {
      const groupId = groupOptionsMenu.getAttribute('data-current-group');
      const groupTasksContainer = document.querySelector(`.task-group-header[data-group-id="${groupId}"] + .group-tasks`);
      const taskCount = groupTasksContainer.querySelectorAll('.task-card').length;

      // åˆ›å»ºæ–°ä»»åŠ¡ID
      const newTaskId = `${groupId}-${taskCount + 1}`;

      // åˆ›å»ºæ–°ä»»åŠ¡HTML
      const newTaskHtml = `
        <div class="task-card bg-blue-50/50 border-blue-100">
          <div class="flex justify-between items-start">
            <div class="flex items-start">
              <div class="task-checkbox bg-white border border-gray-300 rounded-full p-1.5 mr-3 mt-0.5 cursor-pointer" data-task-id="${newTaskId}">
                <i class="fas fa-check text-green-500 text-sm hidden"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800">
                  ${taskCount + 1}. æ–°ä»»åŠ¡
                </div>
                <div class="text-sm text-gray-500 mt-1">
                  é¢„è®¡æ—¶é—´ï¼š30åˆ†é’Ÿ
                </div>
                <div class="flex items-center mt-1">
                  <span class="text-xs bg-yellow-100 text-yellow-500 px-2 py-0.5 rounded-full">
                    ä¼˜å…ˆçº§ï¼šä¸­
                  </span>
                </div>
              </div>
            </div>
            <div class="flex space-x-2 opacity-70 hover:opacity-100 transition-opacity">
              <button class="edit-task text-gray-400 hover:text-primary text-sm" data-task-id="${newTaskId}">
                <i class="fas fa-edit mr-1"></i>
                ç¼–è¾‘
              </button>
              <button class="delete-task text-gray-400 hover:text-red-500 text-sm" data-task-id="${newTaskId}">
                <i class="fas fa-trash-alt mr-1"></i>
                åˆ é™¤
              </button>
            </div>
          </div>
        </div>
      `;

      // æ·»åŠ åˆ°ä»»åŠ¡å®¹å™¨
      groupTasksContainer.insertAdjacentHTML('beforeend', newTaskHtml);

      // æ›´æ–°ç»„è¿›åº¦
      updateGroupProgress(groupId);

      // å…³é—­èœå•
      groupOptionsMenu.classList.add('hidden');

      // ä¸ºæ–°ä»»åŠ¡ç»‘å®šäº‹ä»¶
      bindTaskEvents();
    });

    // ä»»åŠ¡ç»„å±•å¼€/æ”¶èµ·åŠŸèƒ½
    const groupHeaders = document.querySelectorAll('.task-group-header');
    groupHeaders.forEach(header => {
      header.addEventListener('click', (e) => {
        // å¦‚æœç‚¹å‡»çš„æ˜¯é€‰é¡¹æŒ‰é’®ï¼Œä¸è§¦å‘å±•å¼€æ”¶èµ·
        if (e.target.closest('.group-options-btn')) return;

        const groupId = header.getAttribute('data-group-id');
        const tasksContainer = header.nextElementSibling;
        const toggleIcon = header.querySelector('.group-toggle');

        // åˆ‡æ¢ä»»åŠ¡æ˜¾ç¤ºçŠ¶æ€
        tasksContainer.classList.toggle('hidden');

        // åˆ‡æ¢å›¾æ ‡æ–¹å‘
        if (tasksContainer.classList.contains('hidden')) {
          toggleIcon.style.transform = 'rotate(-90deg)';
        } else {
          toggleIcon.style.transform = 'rotate(0)';
        }
      });
    });

    // åˆ é™¤ç¡®è®¤åŠŸèƒ½
    const deleteConfirmModal = document.getElementById('delete-confirm-modal');
    const cancelDeleteBtn = document.getElementById('cancel-delete');
    const confirmDeleteBtn = document.getElementById('confirm-delete');
    let taskToDelete = null;

    // å–æ¶ˆåˆ é™¤
    cancelDeleteBtn.addEventListener('click', () => {
      deleteConfirmModal.classList.add('hidden');
      deleteConfirmModal.classList.remove('flex');
      taskToDelete = null;
    });

    // ç¡®è®¤åˆ é™¤
    confirmDeleteBtn.addEventListener('click', () => {
      if (taskToDelete) {
        const taskElement = taskToDelete.closest('.task-card');
        const groupId = taskToDelete.closest('.group-tasks') ?
          taskToDelete.closest('.group-tasks').previousElementSibling.getAttribute('data-group-id') : null;

        // åˆ é™¤ä»»åŠ¡å…ƒç´ 
        taskElement.remove();

        // å¦‚æœæ˜¯ç»„ä»»åŠ¡ï¼Œæ›´æ–°ç»„è¿›åº¦
        if (groupId) {
          updateGroupProgress(groupId);
        }

        // å…³é—­å¼¹çª—
        deleteConfirmModal.classList.add('hidden');
        deleteConfirmModal.classList.remove('flex');
        taskToDelete = null;
      }
    });

    // ç»‘å®šä»»åŠ¡äº‹ä»¶çš„å‡½æ•°
    function bindTaskEvents() {
      // ä»»åŠ¡åˆ é™¤åŠŸèƒ½
      const deleteButtons = document.querySelectorAll('.delete-task');
      deleteButtons.forEach(btn => {
        // å…ˆç§»é™¤å·²å­˜åœ¨çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œé¿å…é‡å¤ç»‘å®š
        const newBtn = btn.cloneNode(true);
        btn.parentNode.replaceChild(newBtn, btn);

        newBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          taskToDelete = newBtn;
          const taskId = newBtn.getAttribute('data-task-id');
          const taskElement = document.querySelector(`.task-checkbox[data-task-id="${taskId}"]`).closest('.task-card');
          const taskTitle = taskElement.querySelector('.font-medium').textContent.trim();

          // è®¾ç½®ç¡®è®¤æ¶ˆæ¯
          document.getElementById('delete-confirm-message').textContent = `ç¡®å®šè¦åˆ é™¤ä»»åŠ¡"${taskTitle}"å—ï¼Ÿ`;

          // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
          deleteConfirmModal.classList.remove('hidden');
          deleteConfirmModal.classList.add('flex');
        });
      });

      // ä»»åŠ¡å¤é€‰æ¡†åŠŸèƒ½
      const taskCheckboxes = document.querySelectorAll('.task-checkbox');
      taskCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('click', () => {
          const checkIcon = checkbox.querySelector('i');
          checkIcon.classList.toggle('hidden');

          // æ›´æ–°ç»„è¿›åº¦
          const groupId = checkbox.closest('.group-tasks') ?
            checkbox.closest('.group-tasks').previousElementSibling.getAttribute('data-group-id') : null;

          if (groupId) {
            updateGroupProgress(groupId);
          }
        });
      });
    }

    // æ›´æ–°ç»„è¿›åº¦
    function updateGroupProgress(groupId) {
      const groupHeader = document.querySelector(`.task-group-header[data-group-id="${groupId}"]`);
      const tasksContainer = groupHeader.nextElementSibling;
      const totalTasks = tasksContainer.querySelectorAll('.task-card').length;
      const completedTasks = tasksContainer.querySelectorAll('.task-checkbox i:not(.hidden)').length;

      // æ›´æ–°è¿›åº¦æ–‡æœ¬å’Œè¿›åº¦æ¡
      const progressText = tasksContainer.querySelector('.group-progress-text');
      const progressBar = tasksContainer.querySelector('.group-progress-bar');

      if (progressText && progressBar) {
        progressText.textContent = `${completedTasks}/${totalTasks} å®Œæˆ`;

        const progressPercentage = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
        progressBar.style.width = `${progressPercentage}%`;
      }
    }

    // åˆå§‹åŒ–ä»»åŠ¡äº‹ä»¶ç»‘å®š
    bindTaskEvents();

    // ä¸ºä»»åŠ¡ç¼–è¾‘å¼¹çª—æ·»åŠ å…³é—­åŠŸèƒ½
    document.getElementById('close-edit-modal').addEventListener('click', () => {
      document.getElementById('task-edit-modal').classList.add('hidden');
    });
  });
</script>
<!-- [/JSMOD] a1b_ä»»åŠ¡ç»„æ“ä½œé€»è¾‘ -- å¤„ç†ä»»åŠ¡ç»„çš„å±•å¼€æ”¶èµ·ã€ç¼–è¾‘ã€åˆ é™¤å’Œæ·»åŠ å­ä»»åŠ¡ç­‰æ“ä½œ -->
<!-- [JSMOD] c3d_ä»»åŠ¡æ“ä½œèœå•é€»è¾‘ -->
<script id="task-action-menu-script">
  document.addEventListener('DOMContentLoaded', () => {
    const actionMenu = document.getElementById('task-action-menu');
    const optionsBtns = document.querySelectorAll('.task-options-btn');
    let currentTarget = null;

    // ç‚¹å‡»æ“ä½œæŒ‰é’®æ˜¾ç¤ºèœå•
    optionsBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        currentTarget = btn;

        // è·å–æŒ‰é’®ä½ç½®å¹¶æ˜¾ç¤ºèœå•
        const rect = btn.getBoundingClientRect();
        actionMenu.style.top = `${rect.bottom + window.scrollY}px`;
        actionMenu.style.left = `${rect.left + window.scrollX - 120}px`;
        actionMenu.classList.remove('hidden');

        // å­˜å‚¨å½“å‰ç‚¹å‡»çš„å…ƒç´ æ•°æ®åˆ°èœå•
        actionMenu.setAttribute('data-target-type', btn.getAttribute('data-type'));
        actionMenu.setAttribute('data-target-id', btn.getAttribute('data-task-id') || btn.getAttribute('data-group-id'));
      });
    });

    // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
    document.addEventListener('click', () => {
      actionMenu.classList.add('hidden');
      currentTarget = null;
    });

    // é˜»æ­¢èœå•å†…éƒ¨ç‚¹å‡»äº‹ä»¶å†’æ³¡
    actionMenu.addEventListener('click', (e) => {
      e.stopPropagation();
    });

    // èœå•æ“ä½œæŒ‰é’®åŠŸèƒ½
    // ç¼–è¾‘åŠŸèƒ½
    actionMenu.querySelector('.edit-btn').addEventListener('click', () => {
      const targetType = actionMenu.getAttribute('data-target-type');
      const targetId = actionMenu.getAttribute('data-target-id');

      if (targetType === 'group') {
        // ç»„ç¼–è¾‘é€»è¾‘ - è°ƒç”¨ç°æœ‰ç¼–è¾‘åŠŸèƒ½
        document.querySelector(`.group-options-btn[data-group-id="${targetId}"]`).click();
      } else if (targetType === 'task' || targetType === 'independent') {
        // ä»»åŠ¡ç¼–è¾‘é€»è¾‘
        alert('ç¼–è¾‘ä»»åŠ¡åŠŸèƒ½å°†åœ¨è¿™é‡Œå®ç°');
      }

      actionMenu.classList.add('hidden');
    });

    // åˆ é™¤åŠŸèƒ½
    actionMenu.querySelector('.delete-btn').addEventListener('click', () => {
      const targetType = actionMenu.getAttribute('data-target-type');
      const targetId = actionMenu.getAttribute('data-target-id');

      if (targetType === 'group') {
        // ç»„åˆ é™¤é€»è¾‘
        document.querySelector(`.group-options-btn[data-group-id="${targetId}"]`).click();
      } else if (targetType === 'task' || targetType === 'independent') {
        // ä»»åŠ¡åˆ é™¤é€»è¾‘
        const deleteBtn = document.querySelector(`.task-options-btn[data-task-id="${targetId}"]`);
        if (deleteBtn) {
          const taskElement = deleteBtn.closest('.task-card');
          const taskTitle = taskElement.querySelector('.font-medium').textContent.trim();

          // è®¾ç½®ç¡®è®¤æ¶ˆæ¯
          document.getElementById('delete-confirm-message').textContent = `ç¡®å®šè¦åˆ é™¤ä»»åŠ¡"${taskTitle}"å—ï¼Ÿ`;

          // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
          const deleteConfirmModal = document.getElementById('delete-confirm-modal');
          deleteConfirmModal.classList.remove('hidden');
          deleteConfirmModal.classList.add('flex');

          // å­˜å‚¨è¦åˆ é™¤çš„ä»»åŠ¡å…ƒç´ 
          taskToDelete = deleteBtn;
        }
      }

      actionMenu.classList.add('hidden');
    });

    // å®ŒæˆåŠŸèƒ½
    actionMenu.querySelector('.complete-btn').addEventListener('click', () => {
      const targetType = actionMenu.getAttribute('data-target-type');
      const targetId = actionMenu.getAttribute('data-target-id');

      if (targetType === 'task' || targetType === 'independent') {
        // ä»»åŠ¡å®Œæˆé€»è¾‘
        const checkbox = document.querySelector(`.task-checkbox[data-task-id="${targetId}"]`);
        if (checkbox) {
          const checkIcon = checkbox.querySelector('i');
          checkIcon.classList.toggle('hidden');

          // æ›´æ–°ç»„è¿›åº¦
          const groupId = checkbox.closest('.group-tasks') ?
            checkbox.closest('.group-tasks').previousElementSibling.getAttribute('data-group-id') : null;

          if (groupId) {
            updateGroupProgress(groupId);
          }
        }
      }

      actionMenu.classList.add('hidden');
    });
  });
</script>
<!-- [/JSMOD] c3d_ä»»åŠ¡æ“ä½œèœå•é€»è¾‘ -- å¤„ç†ä»»åŠ¡æ“ä½œèœå•çš„æ˜¾ç¤ºã€éšè—å’Œå„é¡¹æ“ä½œåŠŸèƒ½ -->
